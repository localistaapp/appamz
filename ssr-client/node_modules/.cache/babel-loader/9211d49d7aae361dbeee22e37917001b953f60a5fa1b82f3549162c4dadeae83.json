{"ast":null,"code":"import\"./Header.css\";import{useEffect,useState}from\"react\";import axios from'axios';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const onLogoutClick=()=>{console.log('--clicked log out--');alert('Log out');};/*const getLogoSrcWithSubdomain = () => {\n    let url = '';\n    if (typeof window !== 'undefined' && window.location.href.indexOf('www.amuzely.com') == -1 && window.location.href.indexOf('.amuzely.com') != -1) {\n        const storeFolder = window.location.href.substring(window.location.href.indexOf('https://')+'https://'.length,window.location.href.indexOf('.amuzely.com'));\n        url = `../../app/blr/${storeFolder}/images/logo.png`;\n    }\n    else {\n        url = '../../app/blr/swirlyojpnagar/images/logo.png';\n    }\n    return url;\n}*/const getLogoSrc=locationHref=>{let url='';debugger;console.log('--locationHref1--',locationHref);let storeFolder='';if(typeof locationHref!=='undefined'&&locationHref.indexOf('/app/')!=-1){storeFolder=locationHref.substring(locationHref.indexOf('/app/')+'/app/'.length,locationHref.length);if(storeFolder.indexOf('?')>=0){storeFolder=storeFolder.substring(0,storeFolder.indexOf('?'));}url=\"../../app/blr/\".concat(storeFolder,\"/images/logo.png\");}else{url='../../app/blr/swirlyojpnagar/images/logo.png';}console.log('--storeFolder--',storeFolder);return url;};const Header=props=>{const[isClient,setIsClient]=useState(false);const[isShopFlow,setIsShopFlow]=useState(false);const[cashbackExists,setCashbackExists]=useState(false);const[cashbackValue,setCashbackValue]=useState(0);let homeLocation='/';const getCashback=()=>{axios.get(\"/user/cashback/\".concat(localStorage.getItem('nanoId'),\"/\").concat(encodeURIComponent(window.location.pathname))).then(function(response){console.log('--user cashback data-----',response.data.cashBackValue);if(response.data!=null&&response.data.cashBackValue>0){setCashbackExists(true);setCashbackValue(response.data.cashBackValue);}});};useEffect(()=>{setIsClient(true);homeLocation=window.location.href;if(homeLocation&&homeLocation.indexOf('/app/shop/')>=0){setIsShopFlow(true);}else{getCashback();}},[]);console.log('--props.locationHref--',props.locationHref);if(isClient){homeLocation=window.location.href;if(homeLocation.indexOf('?')>=0){homeLocation=window.location.href.substring(0,window.location.href.indexOf('?'));}}const logoSrc=getLogoSrc(props.locationHref);return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(!isShopFlow&&cashbackExists?'top-margin':'',\" header\"),children:[!isShopFlow&&cashbackExists&&/*#__PURE__*/_jsxs(\"span\",{className:\"announcement\",children:[\"You're eligible for cashback upto \\u20B9\",cashbackValue,\". Shop now to redeem!\"]}),!isShopFlow&&/*#__PURE__*/_jsxs(\"svg\",{onClick:props.showSideBar,className:\"\".concat(!isShopFlow&&cashbackExists?'top-margin':'',\" menu-bar text-indigo-600\"),width:\"41\",height:\"41\",viewBox:\"0 0 56 56\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[\"                \",/*#__PURE__*/_jsx(\"rect\",{width:\"56\",height:\"56\",rx:\"16\",fill:\"#b9b9b9\"}),\"                \",/*#__PURE__*/_jsx(\"path\",{d:\"M37 32H19M37 24H19\",stroke:\"white\",\"stroke-width\":\"1.5\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}),\"              \"]}),!isShopFlow&&/*#__PURE__*/_jsx(\"img\",{onClick:()=>window.location.href=homeLocation,className:\"\".concat(!isShopFlow&&cashbackExists?'top-margin-sm':'',\" store-logo-sm\"),src:logoSrc}),/*#__PURE__*/_jsx(\"img\",{class:isShopFlow?\"\".concat(!isShopFlow&&cashbackExists?'top-margin':'',\" store-logo-shop\"):\"\".concat(!isShopFlow&&cashbackExists?'top-margin':'',\" store-logo\"),src:\"../../assets/images/qlogo.png\"}),props.loggedOut&&!isShopFlow&&/*#__PURE__*/_jsx(\"span\",{id:\"logout\",className:\"logout\",onClick:onLogoutClick,children:\"Logout\"})]});};export default Header;","map":{"version":3,"names":["useEffect","useState","axios","jsxs","_jsxs","jsx","_jsx","onLogoutClick","console","log","alert","getLogoSrc","locationHref","url","storeFolder","indexOf","substring","length","concat","Header","props","isClient","setIsClient","isShopFlow","setIsShopFlow","cashbackExists","setCashbackExists","cashbackValue","setCashbackValue","homeLocation","getCashback","get","localStorage","getItem","encodeURIComponent","window","location","pathname","then","response","data","cashBackValue","href","logoSrc","className","children","onClick","showSideBar","width","height","viewBox","fill","xmlns","rx","d","stroke","src","class","loggedOut","id"],"sources":["/Users/srishti/Documents/code/appamz/ssr-client/src/app/header/Header.js"],"sourcesContent":["import \"./Header.css\";\nimport {useEffect, useState} from \"react\";\nimport axios from 'axios';\n\nconst onLogoutClick = () => {\n    console.log('--clicked log out--');\n    alert('Log out');\n}\n\n/*const getLogoSrcWithSubdomain = () => {\n    let url = '';\n    if (typeof window !== 'undefined' && window.location.href.indexOf('www.amuzely.com') == -1 && window.location.href.indexOf('.amuzely.com') != -1) {\n        const storeFolder = window.location.href.substring(window.location.href.indexOf('https://')+'https://'.length,window.location.href.indexOf('.amuzely.com'));\n        url = `../../app/blr/${storeFolder}/images/logo.png`;\n    }\n    else {\n        url = '../../app/blr/swirlyojpnagar/images/logo.png';\n    }\n    return url;\n}*/\n\nconst getLogoSrc = (locationHref) => {\n    let url = '';\n    debugger;\n    console.log('--locationHref1--', locationHref);\n    let storeFolder = '';\n    if (typeof locationHref !== 'undefined' && locationHref.indexOf('/app/') != -1) {\n        storeFolder = locationHref.substring(locationHref.indexOf('/app/')+'/app/'.length,locationHref.length);\n        if(storeFolder.indexOf('?')>=0) {\n            storeFolder = storeFolder.substring(0, storeFolder.indexOf('?'));\n        }\n        url = `../../app/blr/${storeFolder}/images/logo.png`;\n    }\n    else {\n        url = '../../app/blr/swirlyojpnagar/images/logo.png';\n    }\n    console.log('--storeFolder--', storeFolder);\n    return url;\n}\n\nconst Header = (props) => {\n    const [isClient, setIsClient] = useState(false);\n    const [isShopFlow, setIsShopFlow] = useState(false);\n    const [cashbackExists, setCashbackExists] = useState(false);\n    const [cashbackValue, setCashbackValue] = useState(0);\n    let homeLocation = '/';\n\n    const getCashback = () => {\n        axios.get(`/user/cashback/${localStorage.getItem('nanoId')}/${encodeURIComponent(window.location.pathname)}`)\n        .then(function (response) {\n            console.log('--user cashback data-----', response.data.cashBackValue);\n            if (response.data != null && response.data.cashBackValue > 0) {\n                setCashbackExists(true);\n                setCashbackValue(response.data.cashBackValue);\n            }\n        })\n    }\n\n    useEffect(() => {\n        setIsClient(true);\n        homeLocation = window.location.href;\n        if(homeLocation && homeLocation.indexOf('/app/shop/') >= 0) {\n            setIsShopFlow(true);\n        } else {\n            getCashback();\n        }\n      }, []);\n\n    console.log('--props.locationHref--', props.locationHref);\n    if (isClient) {\n        homeLocation = window.location.href;\n        if (homeLocation.indexOf('?') >= 0) {\n            homeLocation = window.location.href.substring(0,window.location.href.indexOf('?'));\n        } \n    }\n   \n    const logoSrc = getLogoSrc(props.locationHref);\n\n    return <div\n        className={`${!isShopFlow && cashbackExists ? 'top-margin' : ''} header`}>\n            {!isShopFlow && cashbackExists && <span className=\"announcement\">You're eligible for cashback upto â‚¹{cashbackValue}. Shop now to redeem!</span>}\n            {!isShopFlow && <svg onClick={props.showSideBar} className={`${!isShopFlow && cashbackExists ? 'top-margin' : ''} menu-bar text-indigo-600`} width=\"41\" height=\"41\" viewBox=\"0 0 56 56\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">                <rect width=\"56\" height=\"56\" rx=\"16\" fill=\"#b9b9b9\"></rect>                <path d=\"M37 32H19M37 24H19\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>              </svg>}\n            {!isShopFlow && <img onClick={()=> window.location.href=homeLocation} className={`${!isShopFlow && cashbackExists ? 'top-margin-sm' : ''} store-logo-sm`} src={logoSrc} />}\n            <img class={isShopFlow ? `${!isShopFlow && cashbackExists ? 'top-margin' : ''} store-logo-shop` :`${!isShopFlow && cashbackExists ? 'top-margin' : ''} store-logo`} src=\"../../assets/images/qlogo.png\"></img>\n            {props.loggedOut && !isShopFlow &&\n                 <span id=\"logout\" className=\"logout\" onClick={onLogoutClick}>Logout</span>}\n        </div>\n}\n\nexport default Header;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}