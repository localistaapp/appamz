{"version":3,"file":"static/js/434.def899d4.chunk.js","mappings":"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","sources":["store/mainview/stats/Stats.js"],"sourcesContent":["import { useState, createRef, useEffect } from \"react\";\nimport axios from 'axios';\nimport \"./Stats.css\";\n\n\nconst RepeatFunnel = ({ data }) => {\n  const qr = data.QR_VISITS || 0;\n  const direct = data.DIRECT_VISITS || 0;\n  const qrDirect = qr + direct;\n\n  const funnelData = [\n    { label: \"QR + Direct Visits\", value: qrDirect, breakdown: { qr, direct } },\n    { label: \"Deals Claimed\", value: data.DEALS_CLAIMED || 0 },\n    { label: \"Repeat Visits\", value: data.REPEAT_VISITS || 0 },\n  ];\n\n  const maxValue = Math.max(...funnelData.map((d) => d.value));\n\n  return (\n    <div className=\"funnel\">\n      {funnelData.map((step, idx) => {\n        const widthPercent = maxValue > 0 ? (step.value / maxValue) * 100 : 0;\n\n        // Choose color\n        let bg = \"#4caf50\"; // green\n        if (widthPercent < 70 && widthPercent >= 40) bg = \"#fbc02d\"; // yellow\n        if (widthPercent < 40) bg = \"#fb8c00\"; // amber\n\n        return (\n          <div key={idx} className=\"funnel-row\">\n            <div className=\"funnel-bar-wrapper\">\n              {step.breakdown ? (\n                <div\n                  className=\"funnel-bar stacked\"\n                  style={{\n                    width: `${widthPercent}%`,\n                  }}\n                >\n                  <div\n                    className=\"bar-qr\"\n                    style={{\n                      flex: step.breakdown.qr,\n                    }}\n                  ></div>\n                  <div\n                    className=\"bar-direct\"\n                    style={{\n                      flex: step.breakdown.direct,\n                    }}\n                  ></div>\n                </div>\n              ) : (\n                <div\n                  className=\"funnel-bar\"\n                  style={{\n                    width: `${widthPercent}%`,\n                    background: bg,\n                  }}\n                ></div>\n              )}\n            </div>\n            <div className=\"funnel-label\">\n              {step.label} — <strong>{step.value}</strong>\n              {step.breakdown && (\n                <span className=\"breakdown\">\n                  {\" \"}\n                  (QR: {step.breakdown.qr}, Direct: {step.breakdown.direct})\n                </span>\n              )}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nconst ReferralFunnel = ({ data }) => {\n  \n    const funnelData = [\n      { label: \"Shares\", value: data.SHARES || 0},\n      { label: \"Share Visits\", value: data.SHARE_VISITS || 0 },\n      { label: \"Deals Claimed\", value: data.SHARE_DEALS_CLAIMED || 0 },\n    ];\n  \n    const maxValue = Math.max(...funnelData.map((d) => d.value));\n  \n    return (\n      <div className=\"funnel\">\n        {funnelData.map((step, idx) => {\n          const widthPercent = maxValue > 0 ? (step.value / maxValue) * 100 : 0;\n  \n          // Choose color\n          let bg = \"#4caf50\"; // green\n          if (widthPercent < 70 && widthPercent >= 40) bg = \"#fbc02d\"; // yellow\n          if (widthPercent < 40) bg = \"#fb8c00\"; // amber\n  \n          return (\n            <div key={idx} className=\"funnel-row\">\n              <div className=\"funnel-bar-wrapper\">\n                {step.breakdown ? (\n                  <div\n                    className=\"funnel-bar stacked\"\n                    style={{\n                      width: `${widthPercent}%`,\n                    }}\n                  >\n                    <div\n                      className=\"bar-qr\"\n                      style={{\n                        flex: step.breakdown.qr,\n                      }}\n                    ></div>\n                    <div\n                      className=\"bar-direct\"\n                      style={{\n                        flex: step.breakdown.direct,\n                      }}\n                    ></div>\n                  </div>\n                ) : (\n                  <div\n                    className=\"funnel-bar\"\n                    style={{\n                      width: `${widthPercent}%`,\n                      background: bg,\n                    }}\n                  ></div>\n                )}\n              </div>\n              <div className=\"funnel-label\">\n                {step.label} — <strong>{step.value}</strong>\n                {step.breakdown && (\n                  <span className=\"breakdown\">\n                    {\" \"}\n                    (QR: {step.breakdown.qr}, Direct: {step.breakdown.direct})\n                  </span>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const OnlineFunnel = ({ data }) => {\n  \n    const enquiries = data.ENQUIRIES || 0;\n    const basketAdd = data.BASKET_ADD || 0;\n    const enquiriesAdd = enquiries + basketAdd;\n\n    const funnelData = [\n        { label: \"Store Browse\", value: data.STORE_BROWSE || 0 },\n        { label: \"Enquiries + Basket Adds\", value: enquiriesAdd, breakdown: { enquiries, basketAdd } },\n        { label: \"Re-order\", value: data.RE_ORDER || 0 },\n    ];\n    const maxValue = Math.max(...funnelData.map((d) => d.value));\n  \n    return (\n      <div className=\"funnel\">\n        {funnelData.map((step, idx) => {\n          const widthPercent = maxValue > 0 ? (step.value / maxValue) * 100 : 0;\n  \n          // Choose color\n          let bg = \"#4caf50\"; // green\n          if (widthPercent < 70 && widthPercent >= 40) bg = \"#fbc02d\"; // yellow\n          if (widthPercent < 40) bg = \"#fb8c00\"; // amber\n  \n          return (\n            <div key={idx} className=\"funnel-row\">\n              <div className=\"funnel-bar-wrapper\">\n                {step.breakdown ? (\n                  <div\n                    className=\"funnel-bar stacked\"\n                    style={{\n                      width: `${widthPercent}%`,\n                    }}\n                  >\n                    <div\n                      className=\"bar-qr\"\n                      style={{\n                        flex: step.breakdown.enquiries,\n                      }}\n                    ></div>\n                    <div\n                      className=\"bar-direct\"\n                      style={{\n                        flex: step.breakdown.basketAdd,\n                      }}\n                    ></div>\n                  </div>\n                ) : (\n                  <div\n                    className=\"funnel-bar\"\n                    style={{\n                      width: `${widthPercent}%`,\n                      background: bg,\n                    }}\n                  ></div>\n                )}\n              </div>\n              <div className=\"funnel-label\">\n                {step.label} — <strong>{step.value}</strong>\n                {step.breakdown && (\n                  <span className=\"breakdown\">\n                    {\" \"}\n                    (Enquiries: {step.breakdown.enquiries}, Basket Adds: {step.breakdown.basketAdd})\n                  </span>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n\n\nconst Stats = ({url}) => {\n    const [qrVisits, setQRVists] = useState(0);\n    const [directsVisits, setDirectsVisits] = useState(0);\n    const [dealsClaimed, setDealsClaimed] = useState(0);\n    const [repeatVisits, setRepeatVisits] = useState(0);\n    const [activeTab, setActiveTab] = useState('repeat');\n    const [activeDITab, setActiveDITab] = useState('searches');\n    const [funnelData, setFunnelData] = useState(null);\n    const [diData, setDiData] = useState(null);\n    const [recentSearches, setRecentSearches] = useState(null);\n\n    const loadDIStats = async (type) => {\n       if (type =='searches' ) {\n        axios.get(`/recent-searches`)\n        .then(function (response) {\n            if(response.data != 'auth error') {\n                setRecentSearches(response.data);\n            }\n        }.bind(this));\n       }\n        axios.get(`/stats/${type}/15 days`)\n            .then(function (response) {\n              let total = 0;\n                if(response.data != 'auth error') {\n                    console.log('--res--', JSON.stringify(response.data));\n                    let cnt = 0;\n                    \n                    let diItems = [];\n                    response.data.forEach((elem,ind) => {\n                      cnt++;\n                      total = total+parseInt(elem.count,0);\n                    });\n                    response.data.forEach((elem1,ind1) => {\n                      console.log('val--',elem1.count/total);\n                      let val = Math.round((elem1.count/total)*100);\n                      let obj = {count: val};\n                      if (typeof elem1.product_type !== 'undefined') {\n                        obj['product_type'] = elem1.product_type;\n                      } else {\n                        obj['query'] = elem1.query;\n                      }\n                      diItems.push(obj);\n                    });\n                    setDiData(diItems);\n                }\n            }.bind(this));\n\n    }\n\n    const loadStats = async (type) => {\n        let storeId = JSON.parse(window.sessionStorage.getItem('user-profile')).storeId;\n        axios.get(`/store-stats/${storeId}/${type.toUpperCase()}`)\n            .then(function (response) {\n                if(response.data != 'auth error') {\n                    console.log('--res--', JSON.stringify(response.data));\n                    const result = response.data.reduce((acc, item) => {\n                        acc[item.metric] = Number(item.value); // convert string to number\n                        return acc;\n                      }, {});\n                      \n                    setFunnelData(result);\n                    setQRVists(result['QR_VISITS']);\n                    setDirectsVisits(result['DIRECT_VISITS']);\n                    setDealsClaimed(result['DEALS_CLAIMED']);\n                    setRepeatVisits(result['REPEAT_VISITS']);\n                }\n            }.bind(this));\n    }\n\n    useEffect(() => {\n        const tabs = document.getElementById('notif-tabs');\n        const tabElements = document.querySelectorAll('.notif-tab');\n\n        tabElements.forEach(tab => {\n            tab.addEventListener('click', () => {\n                tabElements.forEach(t => t.classList.remove('active'));\n                tab.classList.add('active');\n            });\n        });\n\n        loadStats('repeat');\n        loadDIStats('searches');\n    }, []);\n\n    return (\n        <div className=\"main\">\n          <div class=\"di-container\">\n                <h1>Demand Insights</h1>\n                <div class=\"notif-tabs-container\">\n                    <div class=\"notif-tabs\" id=\"notif-tabs-0\">\n                        <div onClick={()=>{setActiveDITab('searches');loadDIStats('searches');}} className={`notif-tab ${activeDITab == 'searches' ? 'active' : ''}`}>Searches</div>\n                        <div onClick={()=>{setActiveDITab('favourites');loadDIStats('favs');}} className={`notif-tab ${activeDITab == 'favourites' ? 'active' : ''}`}>Favourites</div>\n                    </div>\n                </div>\n                {diData != null && activeDITab == \"searches\" && <><div className=\"funnel-headline\">\n\n                        <span style={{marginRight: '8px',fontWeight: 'bold', top: '-14px', position: 'relative', color: '#616161'}}>Recent Searches:</span>\n                        {recentSearches && recentSearches.map ((recent, index)=> {\n                            if (index == 0) {\n                              return  <span style={{top: '-14px', position: 'relative', color: '#616161'}}>{recent.query}</span>\n                            } else {\n                              return  <span style={{top: '-14px', position: 'relative', color: '#616161'}}>, {recent.query}</span>\n                            }\n                        })\n                       \n                        }\n                          <ul class=\"cloud\" role=\"navigation\" aria-label=\"Webdev word cloud\">\n                            {\n                              diData.map((item,index) => (\n                                <li><a href=\"#\" data-weight={item.count}>{item.query}</a></li>\n                              ))\n                            }\n                          </ul>\n                    </div></>\n                }\n                {diData != null && activeDITab == \"favourites\" && <><div className=\"funnel-headline\">\n                          <ul class=\"cloud\" role=\"navigation\" aria-label=\"Webdev word cloud\">\n                            {\n                              diData.map((item,index) => (\n                                <li><a href=\"#\" data-weight={item.count}>{item.product_type}</a></li>\n                              ))\n                            }\n                          </ul>\n                    </div></>\n                }\n            </div>\n\n           <div class=\"stats-container\">\n                <h1>Stats</h1>\n                <div class=\"notif-tabs-container\">\n                    <div class=\"notif-tabs\" id=\"notif-tabs\">\n                        <div onClick={()=>{setActiveTab('repeat');loadStats('repeat');}} className={`notif-tab ${activeTab == 'repeat' ? 'active' : ''}`}>Repeat</div>\n                        <div onClick={()=>{setActiveTab('referral');loadStats('referral');}} className={`notif-tab ${activeTab == 'referral' ? 'active' : ''}`}>Referral</div>\n                        <div onClick={()=>{setActiveTab('online');loadStats('online');}} className={`notif-tab ${activeTab == 'online' ? 'active' : ''}`}>Reorder</div>\n                    </div>\n                </div>\n                \n                {funnelData != null && activeTab == \"repeat\" && <><div className=\"funnel-headline\">\n                        Repeat visitor funnel:\n                    </div>\n                    <RepeatFunnel data={funnelData} />\n                    </>\n                }\n                {funnelData != null && activeTab == \"referral\" && <><div className=\"funnel-headline\">\n                        Referral visitor funnel:\n                    </div>\n                    <ReferralFunnel data={funnelData} />\n                    </>\n                }\n                {funnelData != null && activeTab == \"online\" && <><div className=\"funnel-headline\">\n                        Online reordering funnel:\n                    </div>\n                    <OnlineFunnel data={funnelData} />\n                    </>\n                }\n                \n            </div>\n\n        </div>\n    );\n}\n\nexport default Stats;\n"],"names":["RepeatFunnel","_ref","data","qr","QR_VISITS","direct","DIRECT_VISITS","funnelData","label","value","breakdown","DEALS_CLAIMED","REPEAT_VISITS","maxValue","Math","max","map","d","_jsx","className","children","step","idx","widthPercent","bg","_jsxs","style","width","concat","flex","background","ReferralFunnel","_ref2","SHARES","SHARE_VISITS","SHARE_DEALS_CLAIMED","OnlineFunnel","_ref3","enquiries","ENQUIRIES","basketAdd","BASKET_ADD","enquiriesAdd","STORE_BROWSE","RE_ORDER","_ref4","url","qrVisits","setQRVists","useState","directsVisits","setDirectsVisits","dealsClaimed","setDealsClaimed","repeatVisits","setRepeatVisits","activeTab","setActiveTab","activeDITab","setActiveDITab","setFunnelData","diData","setDiData","recentSearches","setRecentSearches","loadDIStats","async","type","axios","then","response","bind","total","console","log","JSON","stringify","cnt","diItems","forEach","elem","ind","parseInt","count","elem1","ind1","obj","round","product_type","query","push","loadStats","storeId","parse","window","sessionStorage","getItem","toUpperCase","result","reduce","acc","item","metric","Number","useEffect","document","getElementById","tabElements","querySelectorAll","tab","addEventListener","t","classList","remove","add","class","id","onClick","_Fragment","marginRight","fontWeight","top","position","color","recent","index","role","href"],"sourceRoot":""}