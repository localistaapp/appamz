"use strict";(self.webpackChunkssr_client=self.webpackChunkssr_client||[]).push([[987],{987:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var i=t(9643),l=t(7214),a=t.n(l),d=t(6507);const c=e=>{let{product:s,index:t,basketData:l,setBasketData:a,setTotalPrice:c}=e;const n=Math.round(1.2*s.price),[r,o]=(0,i.useState)(0);document.addEventListener("basket-updated",(function(e){console.log("basket-updated event",e.detail);var s,t=localStorage.getItem("basket");if(s=null==t?new Object:JSON.parse(t),null!=e.detail&&(console.log("e.detail.itemId: ",e.detail.itemId),console.log("e.detail.qty: ",e.detail.qty),e.detail.qty<=0&&null!=s[e.detail.itemId]?(delete s[e.detail.itemId],document.getElementById("checkoutCount").innerHTML=Object.keys(s).length,0==Object.keys(s).length&&(document.getElementById("checkoutHeader").style.display="none")):e.detail.qty>0&&(s[e.detail.itemId]=e.detail)),Object.keys(s).length>=1){document.getElementById("checkoutHeader").style.display="inline",document.getElementById("checkoutCount").innerHTML=Object.keys(s).length,a(s);let e=0,t=750;Object.keys(s).forEach((t=>{e+=s[t].price})),c(e+t),console.log("--basketData--",s)}var i=JSON.stringify(s);localStorage.setItem("basket",i)}));const m=(e,s,t)=>{e>=1?(document.getElementById("checkoutHeader").style.display="block",document.getElementById("checkoutCount").innerHTML=e):0==Object.keys(t).length&&(document.getElementById("checkoutHeader").style.display="none");var i=new CustomEvent("basket-updated",{detail:{name:s.title,price:s.price*e,qty:e,itemId:s.id,itemSrc:s.image_url}});document.dispatchEvent(i)};return(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("img",{src:s.image_url,alt:s.title}),(0,d.jsxs)("div",{className:"card-content",children:[(0,d.jsx)("div",{className:"highlights",children:s.highlights}),(0,d.jsx)("div",{className:"description",children:s.description}),(0,d.jsxs)("div",{className:"price",children:[(0,d.jsxs)("div",{className:"price-current",children:["\u20b9",s.price]}),(0,d.jsxs)("div",{className:"price-original",children:["\u20b9",n]})]}),(0,d.jsxs)("div",{className:"quantity",children:[(0,d.jsx)("a",{className:"quantity__minus",children:(0,d.jsx)("span",{style:{fontSize:"25px",lineHeight:"0px",marginLeft:"2px"},onClick:()=>((e,s)=>{r>=1&&(o(r-1),m(r-1,e,s))})(s,l),children:"-"})}),(0,d.jsx)("input",{name:"quantity",type:"text",className:"quantity__input",value:r}),(0,d.jsx)("a",{className:"quantity__plus",onClick:()=>{((e,s)=>{o(r+1),m(r+1,e,s)})(s,l)},children:(0,d.jsx)("span",{children:"+"})})]})]})]},t)},n=e=>{let{products:s,storeConfig:t}=e;const[l,n]=(0,i.useState)(null),[r,o]=(0,i.useState)(0),[m,p]=(0,i.useState)(1),[h,x]=(0,i.useState)({}),[v,u]=(0,i.useState)([]),[g,j]=(0,i.useState)(!1),[y,w]=(0,i.useState)([]),[k,b]=(0,i.useState)(!1),[f,S]=(0,i.useState)(!1);let N=!!window&&(window.weekdays=new Array(7));N=!!window&&(window.weekdays[0]="Sunday"),N=!!window&&(window.weekdays[1]="Monday"),N=!!window&&(window.weekdays[2]="Tuesday"),N=!!window&&(window.weekdays[3]="Wednesday"),N=!!window&&(window.weekdays[4]="Thursday"),N=!!window&&(window.weekdays[5]="Friday"),N=!!window&&(window.weekdays[6]="Saturday"),(0,i.useEffect)((()=>{const e=document.getElementById("checkoutBtn"),s=document.getElementById("modal"),i=document.getElementById("closeBtn");if(e.addEventListener("click",(()=>{p(1),s.classList.add("active")})),i.addEventListener("click",(()=>{s.classList.remove("active")})),localStorage.removeItem("basket"),v&&0==v.length){let e=0;try{e=t.storeId}catch(l){console.log("error")}a().get("/store/get-all/".concat(e)).then(function(e){"auth error"!=e.data&&(console.log("--store availability data--",JSON.stringify(e.data)),x(e.data[0].online_orders_timings),j("Y"==e.data[0].accepting_online_orders),u(e.data[0].online_orders_pincodes))}.bind(void 0))}}),[]);null!=l&&console.log("--Object.keys(basketData).length--",Object.keys(l).length);return(0,d.jsxs)("div",{className:"product-list",children:[(0,d.jsx)("div",{id:"checkoutHeader",children:(0,d.jsxs)("div",{id:"checkoutBtn",className:"card-btn checkout",onClick:()=>{document.getElementById("checkoutModal").style.top="-40px",(void 0).setState({orderSummary:null!=localStorage.getItem("basket")?JSON.parse(localStorage.getItem("basket")):[]})},children:["Checkout\xa0\u2192",(0,d.jsx)("div",{className:""}),(0,d.jsx)("div",{id:"checkoutCount",class:"c-count",children:"0"})]})}),(0,d.jsxs)("div",{className:"modal-overlay",id:"modal",children:[(0,d.jsx)("button",{className:"close-btn",id:"closeBtn",children:"\xd7"}),(0,d.jsxs)("div",{className:"modal-content",children:[(0,d.jsxs)("div",{class:"md-stepper-horizontal orange",style:{marginTop:"8px"},children:[(0,d.jsxs)("div",{id:"step1",class:"md-step",children:[(0,d.jsx)("div",{class:"md-step-circle active",id:"step1Circle",children:(0,d.jsx)("span",{children:"1"})}),(0,d.jsx)("div",{class:"md-step-title",children:"Order Summary"}),(0,d.jsx)("div",{class:"md-step-bar-left"}),(0,d.jsx)("div",{class:"md-step-bar-right"})]}),(0,d.jsxs)("div",{id:"step2",class:"md-step",children:[(0,d.jsx)("div",{class:"md-step-circle",id:"step2Circle",children:(0,d.jsx)("span",{children:"2"})}),(0,d.jsx)("div",{class:"md-step-title",children:"Delivery Schedule"}),(0,d.jsx)("div",{class:"md-step-bar-left"}),(0,d.jsx)("div",{class:"md-step-bar-right"})]}),(0,d.jsxs)("div",{id:"step3",class:"md-step",children:[(0,d.jsx)("div",{class:"md-step-circle",id:"step3Circle",children:(0,d.jsx)("span",{children:"3"})}),(0,d.jsx)("div",{class:"md-step-title",children:"Delivery Details"}),(0,d.jsx)("div",{class:"md-step-bar-left"}),(0,d.jsx)("div",{class:"md-step-bar-right"})]})]}),(0,d.jsxs)("div",{class:"checkout-content",style:{overflowY:"scroll",overflowX:"hidden"},children:[1==m&&null!=l&&Object.keys(l).length>0&&Object.keys(l).map((e=>(0,d.jsxs)("div",{class:"card-container small",style:{padding:"0px 12px",height:"163px",marginTop:"0px"},children:[(0,d.jsx)("div",{class:"section-one",children:(0,d.jsxs)("div",{class:"top",children:[(0,d.jsx)("div",{class:"top-left-mini",children:(0,d.jsx)("img",{id:"primaryImgp0",class:"primary-img rotatable",src:l[e].itemSrc,style:{width:"72px",paddingTop:"0px"}})}),(0,d.jsxs)("div",{class:"top-right-mini",children:[(0,d.jsx)("div",{class:"usp-title",children:(0,d.jsx)("div",{class:"title",style:{marginTop:"-10px"},children:l[e].name})}),(0,d.jsxs)("div",{class:"usp-desc",style:{color:"rgb(101, 101, 101)",marginTop:"48px"},children:["Quantity: (",l[e].qty,")"]})]})]})}),(0,d.jsxs)("div",{class:"section-two small",children:[(0,d.jsx)("div",{class:"pricing",children:(0,d.jsxs)("label",{class:"price",children:[(0,d.jsx)("span",{class:"rupee",style:{marginLeft:"6px"},children:"\u20b9"}),(0,d.jsx)("span",{class:"orig",id:"priceNewp0",children:l[e].price})]})}),(0,d.jsx)("div",{class:"top"})]})]}))),2==m&&(0,d.jsx)("div",{className:"card-container",style:{marginTop:"4px",height:"480px"},children:(0,d.jsxs)("div",{className:"section-one",children:[(0,d.jsx)("div",{className:"top",children:(0,d.jsxs)("div",{className:"top-right",children:[(0,d.jsx)("img",{src:"../../assets/images/shipment.png",className:"delivery-icon",style:{marginTop:"0px",width:"48px"}}),(0,d.jsx)("span",{className:"title-ff",style:{top:"0px",padding:"10px",lineHeight:"22px",width:"210px",left:"11px"},children:"Share your pincode to check delivery options:"})]})}),(0,d.jsx)("div",{className:"top-right step-2",style:{left:"0px",marginTop:"70px"},children:(0,d.jsxs)("div",{className:"usp-title",style:{left:"0",right:"0",margin:"0 auto"},children:[(0,d.jsxs)("div",{className:"usp-title",children:[(0,d.jsx)("input",{id:"dPincode",type:"text",className:"step-input",placeholder:"Your pincode",style:{left:"20px",top:"0px"}}),(0,d.jsx)("input",{type:"button",class:"pincode-btn",value:"Check Options",onClick:()=>{if(v&&v.indexOf(document.getElementById("dPincode").value)>=0){var e=window?window.weekdays[(new Date).getDay()].toLowerCase():"";h.hasOwnProperty(e)&&h[e].length>0?(console.log("--schedule--",h[e]),w(h[e].filter((e=>parseInt(e.substr(0,e.indexOf("pm")))>(()=>{let e=(new Date).getHours();return e>12?e-=12:0===e&&(e=12),e})()))),b(!0),S(!1)):(b(!1),S(!0))}else b(!1),S(!0)}})]}),(0,d.jsxs)("div",{className:"delivery-section",style:{top:"124px",paddingTop:"20px",display:"".concat(1==k?"block":"none")},children:[1==g&&(0,d.jsxs)("div",{class:"radios",children:[(0,d.jsx)("input",{type:"radio",style:{width:"30px"},id:"deliverNow",name:"deliveryTime",value:"deliverNow",checked:!0}),(0,d.jsx)("label",{for:"deliverNow",style:{color:"green"},children:"Deliver Now (Delivery in 90 minutes)"}),(0,d.jsx)("br",{}),(0,d.jsx)("input",{type:"radio",id:"deliverSchedule",name:"deliveryTime",value:"deliverSchedule",style:{width:"30px",marginTop:"14px"},selected:!0}),(0,d.jsx)("label",{for:"deliverSchedule",children:"Deliver Later"})]}),1==g&&(0,d.jsx)("div",{className:"deliver-cell",style:{marginTop:"12px",marginLeft:"40px"},children:(0,d.jsx)("span",{children:"Select your time slot for delivery today:"})}),1==g&&(0,d.jsx)("div",{className:"deliver-cell",style:{marginTop:"12px",marginLeft:"30px"},children:(0,d.jsx)("select",{name:"slot",id:"slot",style:{height:"48px",marginLeft:"10px",width:"172px"},className:"slot-dropdown",onChange:e=>{sessionStorage.setItem("deliverySlot",e.target.options[e.target.selectedIndex].text)},children:y&&y.map((e=>(0,d.jsx)("option",{value:e,children:e})))})}),(0,d.jsx)("div",{className:"slot"})]}),g,(0,d.jsxs)("div",{className:"delivery-section msg",style:{top:"123px",display:"".concat(1==f||0==g?"block":"none")},children:[(0,d.jsx)("div",{className:"deliver-cell",style:{marginTop:"12px",marginLeft:"6px"},children:(0,d.jsx)("span",{children:"Sorry! Our store isn't servicing this locality at the moment."})}),(0,d.jsx)("div",{className:"slot"})]}),(0,d.jsx)("br",{})]})})]})}),(0,d.jsxs)("div",{class:"summary-total",children:["Total:  ",(0,d.jsx)("span",{class:"rupee",children:"\u20b9"}),(0,d.jsx)("span",{id:"price",children:r}),(0,d.jsx)("div",{style:{fontSize:"13px",marginTop:"5px",marginLeft:"2px"},children:"(incl GST + delivery apprx.)"})]}),(0,d.jsxs)("div",{id:"checkoutBtn",class:"card-btn checkout-next",style:{bottom:"120px",marginTop:"auto"},onClick:()=>{1==m&&(document.getElementById("step1").classList.add("done"),document.getElementById("step1Circle").classList.remove("active"),document.getElementById("step2Circle").classList.add("active"),p(2))},children:["Next\xa0\u2192",(0,d.jsx)("div",{class:""})]})]})]})]}),s.map(((e,s)=>(0,d.jsx)(c,{product:e,index:s,basketData:l,setBasketData:n,setTotalPrice:o})))]})},r=e=>{const[s,t]=(0,i.useState)({});(0,i.useEffect)((()=>{a(0,"categories")}),[]);const l=((e,s)=>{const t=[];let i=e;for(;i&&"object"===typeof i;){const e=Object.keys(i);t.push({data:i,keys:e});const l=s[t.length-1];if(!l||!i[l])break;i=i[l]}return t})(e,Object.values(s)),a=(e,s)=>{if(document.getElementById("sub-tabs").style.display="inline-block","categories"!==s){if(console.log("--levelIndex--",e),window.filterStr="undefined"==typeof window.filterStr?s:window.filterStr+","+s,e<window.filterStr.split(",").length){let t=window.filterStr.split(",");t.splice(e-1,0,s),t.length=e,window.filterStr=t.toString()}console.log("--filterStr--",window.filterStr),window.onFilter(s,window.filterStr)}t((t=>{const i={...t};return i[e]=s,Object.keys(i).filter((s=>parseInt(s)>e)).forEach((e=>delete i[e])),i}))};return(0,d.jsx)("div",{children:l.map(((e,t)=>(window.scrollTo(0,55*t),t>0?(0,d.jsx)("div",{children:(0,d.jsx)("div",{className:"tabs",children:e.keys.map((e=>e.match(/^\d+$/)?null:(0,d.jsx)("div",{className:"tab ".concat(s[t]===e?"active":""),onClick:()=>a(t,e),children:e},e)))})},t):(0,d.jsx)("div",{}))))})},o=()=>(0,d.jsxs)("div",{className:"loading-screen",children:[(0,d.jsx)("div",{className:"shimmer",children:(0,d.jsxs)("div",{class:"wrapper",children:[(0,d.jsx)("div",{class:"animate image-card"}),(0,d.jsx)("div",{class:"animate stroke title"}),(0,d.jsx)("div",{class:"animate stroke link"}),(0,d.jsx)("div",{class:"animate stroke description"})]})}),(0,d.jsx)("div",{class:"shimmer",children:(0,d.jsxs)("div",{class:"wrapper",children:[(0,d.jsx)("div",{class:"animate image-card"}),(0,d.jsx)("div",{class:"animate stroke title"}),(0,d.jsx)("div",{class:"animate stroke link"}),(0,d.jsx)("div",{class:"animate stroke description"})]})}),(0,d.jsx)("div",{class:"shimmer",children:(0,d.jsxs)("div",{class:"wrapper",children:[(0,d.jsx)("div",{class:"animate image-card"}),(0,d.jsx)("div",{class:"animate stroke title"}),(0,d.jsx)("div",{class:"animate stroke link"}),(0,d.jsx)("div",{class:"animate stroke description"})]})}),(0,d.jsx)("div",{class:"shimmer",children:(0,d.jsxs)("div",{class:"wrapper",children:[(0,d.jsx)("div",{class:"animate image-card"}),(0,d.jsx)("div",{class:"animate stroke title"}),(0,d.jsx)("div",{class:"animate stroke link"}),(0,d.jsx)("div",{class:"animate stroke description"})]})}),(0,d.jsx)("div",{class:"shimmer",children:(0,d.jsxs)("div",{class:"wrapper",children:[(0,d.jsx)("div",{class:"animate image-card"}),(0,d.jsx)("div",{class:"animate stroke title"}),(0,d.jsx)("div",{class:"animate stroke link"}),(0,d.jsx)("div",{class:"animate stroke description"})]})})]}),m=e=>{let{url:s,storeConfig:t}=e;const[l,c]=(0,i.useState)(""),[m,p]=(0,i.useState)([]),[h,x]=(0,i.useState)([]),[v,u]=(0,i.useState)({}),[g,j]=(0,i.useState)(0),[y,w]=(0,i.useState)(!0);console.log("--store c1111--",t);const k=(e,s)=>{if(j(g+1),document.getElementById("tabDefault").classList.remove("active"),document.getElementById("tabSeasons").classList.remove("active"),document.getElementById("tabArrival").classList.remove("active"),document.getElementById(s).classList.add("active"),"tabDefault"==s){document.getElementById("sub-tabs").style.display="inline-block";const e=document.getElementById("sub-tabs");if(e){e.querySelectorAll(".active").forEach((e=>e.classList.remove("active")))}}else document.getElementById("sub-tabs").style.display="none";let i=0;try{i=t.storeId}catch(l){console.log("error")}a().get("/products/".concat(i,"/").concat(e)).then((function(e){"auth error"!=e.data&&(console.log("--product res--",JSON.stringify(e.data)),w(!1),p(e.data))}))};let b=0;try{b=t.storeId}catch(f){console.log("error")}return 0==m.length&&a().get("/products/".concat(b)).then(function(e){if("auth error"!=e.data){console.log("--product res--",JSON.stringify(e.data)),w(!1),p(e.data),x(e.data);let s=e.data,t={};s.forEach((e=>{const s=e.highlights.split(",").map((e=>e.trim()));let i=t;s.forEach(((e,t)=>{t===s.length-1?i[e]=0:(i[e]||(i[e]={}),i=i[e])}))})),u(t),console.log("tabMap:",t)}}.bind(void 0)),window.onFilter=(e,s)=>{console.log("-selected-",e),console.log("-filters-"+s+"-");let t=s;const i=h.filter((e=>e.highlights.trim().indexOf(t.trim())>=0));console.log("--newArr--",i),p(i)},(0,d.jsx)("div",{className:"main",children:(0,d.jsxs)("div",{class:"container",children:[(0,d.jsx)("h1",{style:{marginLeft:"16px"},children:"View Products"}),(0,d.jsxs)("div",{class:"tabs-container",children:[(0,d.jsxs)("div",{class:"tabs",id:"main-tabs",children:[(0,d.jsx)("div",{id:"tabDefault",class:"tab active",onClick:()=>k("tags_default","tabDefault"),children:"All"}),(0,d.jsx)("div",{id:"tabSeasons",class:"tab",onClick:()=>k("tags_seasons_special","tabSeasons"),children:"Season's Special"}),(0,d.jsx)("div",{id:"tabArrival",class:"tab",onClick:()=>k("tags_new_arrival","tabArrival"),children:"New Arrivals"})]}),(0,d.jsx)("div",{class:"sub-tabs",id:"sub-tabs",style:{marginBottom:"0",marginTop:"-16px"},children:g>=0&&(0,d.jsx)(r,{categories:v})})]}),!y&&(0,d.jsx)(n,{products:m,storeConfig:t}),y&&(0,d.jsx)(o,{})]})})}}}]);
//# sourceMappingURL=987.f94b81a0.chunk.js.map