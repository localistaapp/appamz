"use strict";(self.webpackChunkssr_client=self.webpackChunkssr_client||[]).push([[434],{3434:(e,s,a)=>{a.r(s),a.d(s,{default:()=>r});var t=a(9643),l=a(7214),i=a.n(l),n=a(6507);const c=e=>{let{data:s}=e;const a=s.QR_VISITS||0,t=s.DIRECT_VISITS||0,l=[{label:"QR + Direct Visits",value:a+t,breakdown:{qr:a,direct:t}},{label:"Deals Claimed",value:s.DEALS_CLAIMED||0},{label:"Repeat Visits",value:s.REPEAT_VISITS||0}],i=Math.max(...l.map((e=>e.value)));return(0,n.jsx)("div",{className:"funnel",children:l.map(((e,s)=>{const a=i>0?e.value/i*100:0;return(0,n.jsxs)("div",{className:"funnel-row",children:[(0,n.jsx)("div",{className:"funnel-bar-wrapper",children:e.breakdown?(0,n.jsxs)("div",{className:"funnel-bar stacked",style:{width:"".concat(a,"%")},children:[(0,n.jsx)("div",{className:"bar-qr",style:{flex:e.breakdown.qr}}),(0,n.jsx)("div",{className:"bar-direct",style:{flex:e.breakdown.direct}})]}):(0,n.jsx)("div",{className:"funnel-bar single",style:{width:"".concat(a,"%"),background:e.value>6?"#4caf50":e.value>3?"#fbc02d":"#fb8c00"}})}),(0,n.jsxs)("div",{className:"funnel-label",children:[e.label," \u2014 ",(0,n.jsx)("strong",{children:e.value}),e.breakdown&&(0,n.jsxs)("span",{className:"breakdown",children:[" ","(QR: ",e.breakdown.qr,", Direct: ",e.breakdown.direct,")"]})]})]},s)}))})},r=e=>{let{url:s}=e;const[a,l]=(0,t.useState)(0),[r,d]=(0,t.useState)(0),[o,u]=(0,t.useState)(0),[v,f]=(0,t.useState)(0),[b,h]=(0,t.useState)(null);return(0,t.useEffect)((()=>{document.getElementById("notif-tabs");const e=document.querySelectorAll(".notif-tab");e.forEach((s=>{s.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("active"))),s.classList.add("active")}))})),(async()=>{let e=JSON.parse(window.sessionStorage.getItem("user-profile")).storeId;i().get("/store-stats/".concat(e)).then(function(e){if("auth error"!=e.data){console.log("--res--",JSON.stringify(e.data));const s=e.data.reduce(((e,s)=>(e[s.metric]=Number(s.value),e)),{});h(s),l(s.QR_VISITS),d(s.DIRECT_VISITS),u(s.DEALS_CLAIMED),f(s.REPEAT_VISITS)}}.bind(void 0))})()}),[]),(0,n.jsx)("div",{className:"main",children:(0,n.jsxs)("div",{class:"container",children:[(0,n.jsx)("h1",{children:"Stats"}),(0,n.jsx)("div",{class:"notif-tabs-container",children:(0,n.jsxs)("div",{class:"notif-tabs",id:"notif-tabs",children:[(0,n.jsx)("div",{class:"notif-tab active",children:"Repeat"}),(0,n.jsx)("div",{class:"notif-tab",children:"Referral"}),(0,n.jsx)("div",{class:"notif-tab",children:"Online Orders"})]})}),null!=b&&(0,n.jsx)(c,{data:b}),(0,n.jsxs)("div",{className:"festive",children:[a>0&&(0,n.jsx)("div",{className:"notif-item",children:a}),r>0&&(0,n.jsx)("div",{className:"notif-item",children:r}),o>0&&(0,n.jsx)("div",{className:"notif-item",children:o}),v>0&&(0,n.jsx)("div",{className:"notif-item",children:v})]})]})})}}}]);
//# sourceMappingURL=434.11b083d3.chunk.js.map