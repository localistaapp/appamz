"use strict";(self.webpackChunkssr_client=self.webpackChunkssr_client||[]).push([[335],{9335:(e,t,o)=>{o.a(e,(async(e,a)=>{try{o.r(t),o.d(t,{default:()=>u});o(5088);var s=o(9643),n=o(7214),i=o.n(n),r=o(5670),c=o(1539),l=o(6507),d=e([c]);c=(d.then?(await d)():d)[0];const h=()=>{console.log("--clicked log out--"),alert("Log out")},u=e=>{const[t,o]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[g,m]=(0,s.useState)(0),[p,f]=(0,s.useState)(!1),[x,w]=(0,s.useState)(!1),[b,S]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[y,k]=(0,s.useState)([]),[I,A]=(0,s.useState)(""),[L,V]=(0,s.useState)(null);let H="/";const C=()=>{document.querySelector("#idHeader").classList.remove("card-margin-header"),document.querySelector("#idMenu").classList.remove("card-margin-menu"),document.querySelector("#idLogoSm").classList.remove("card-margin-logo-sm"),document.querySelector("#idLogo").classList.remove("card-margin-logo")},M=()=>"subscribed"==window.PushAlertCo.getSubsInfo().status||null!=localStorage.getItem("notif-shown")&&"true"==localStorage.getItem("notif-shown"),q=()=>{null==localStorage.getItem("notif-shown")&&localStorage.setItem("notif-shown","true")},O=e=>{console.log("cb-",e.subscriber_id),console.log("cb-",e.alreadySubscribed),localStorage.setItem("subscribed","true"),(0,c.default)(),w(!0),f(!1),C()},B=()=>{null==localStorage.getItem("subscribed")||"true"!=localStorage.getItem("subscribed")?["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document?(console.log("isNotificationShown: ",M()),M()?q():(document.querySelector("#idHeader").classList.add("card-margin-header"),document.querySelector("#idMenu").classList.add("card-margin-menu"),document.querySelector("#idLogoSm").classList.add("card-margin-logo-sm"),document.querySelector("#idLogo").classList.add("card-margin-logo"),f(!0),localStorage.setItem("notif-shown","true"))):q():(f(!1),C()),window.pushalertbyiw&&window.pushalertbyiw.push(["onSuccess",O])};(0,s.useEffect)((()=>{var e;o(!0);let t={swirlyojpnagar:{storeId:"9",placeId:""},kidsaurajpnagar:{storeId:"13",placeId:"ChIJjSGVUwAVrjsRKuLMxFv9BYE"}}[null===(e=window)||void 0===e?void 0:e.location.pathname.split("/")[2]];V(t),H=window.location.href,H&&H.indexOf("/app/shop/")>=0?n(!0):((()=>{let e=window.location.href,t="",o="";"undefined"!==typeof e&&-1!=e.indexOf("/app/")?(o=e.substring(e.indexOf("/app/")+5,e.length),o.indexOf("?")>=0&&(o=o.substring(0,o.indexOf("?"))),A(o),t="../../app/blr/".concat(o,"/images/logo.png")):t="../../app/blr/swirlyojpnagar/images/logo.png",console.log("--logosrc--",b),S(t)})(),alert("/user/cashback/".concat(localStorage.getItem("nanoId"),"/").concat(L.storeId)),i().get("/user/cashback/".concat(localStorage.getItem("nanoId"),"/").concat(L.storeId)).then((function(e){console.log("--user cashback data-----",e.data.cashBackValue),null!=e.data&&e.data.cashBackValue>0&&(u(!0),m(e.data.cashBackValue),localStorage.setItem("cashback-value",e.data.cashBackValue))})),B(),(e=>{i().get("/shops/place/".concat(e.placeId)).then((function(e){if(console.log("--place data-----",e.data),null!=e.data){let t=e.data.split(",");k(t)}}))})(t))}),[]),console.log("--props.locationHref--",e.locationHref),t&&(H=window.location.href,H.indexOf("?")>=0&&(H=window.location.href.substring(0,window.location.href.indexOf("?"))));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{id:"idHeader",className:"".concat(!a&&d?"top-margin":""," header"),children:[!a&&d&&(0,l.jsxs)("span",{className:"announcement",children:["\ud83c\udf89 You're eligible for instant cashback of \u20b9",g,". Shop now to redeem!"]}),!a&&(0,l.jsxs)("svg",{id:"idMenu",onClick:e.showSideBar,className:"".concat(!a&&d?"top-margin":""," menu-bar text-indigo-600"),width:"41",height:"41",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:["                ",(0,l.jsx)("rect",{width:"56",height:"56",rx:"16",fill:"#b9b9b9"}),"                ",(0,l.jsx)("path",{d:"M37 32H19M37 24H19",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),"              "]}),!a&&(0,l.jsx)("img",{id:"idLogoSm",onClick:()=>window.location.href=H,className:"".concat(!a&&d?"top-margin-sm":""," store-logo-sm"),src:b}),(0,l.jsx)("img",{id:"idLogo",class:"".concat(!a&&d?"top-margin":"",a?" store-logo-shop":" store-logo"),src:"../../assets/images/qlogo.png"}),e.loggedOut&&!a&&(0,l.jsx)("span",{id:"logout",className:"logout",onClick:h,children:"Logout"})]}),p&&(0,l.jsxs)("div",{class:"notif-card-box-th notif-card-box-th-1",style:{backgroundCcolor:"#fff!important"},children:[(0,l.jsx)("div",{class:"notif-card-icon-container",children:(0,l.jsx)("img",{src:"../../assets/images/dealcard.png",style:{width:"140px"}})}),(0,l.jsxs)("div",{class:"notif-card-msg-box-container",children:[(0,l.jsx)("div",{class:"notif-card-title-txt-container",children:(0,l.jsx)("p",{class:"notif-card-title-txt",style:{color:"#333!important"},children:"Unlock special offer"})}),(0,l.jsx)("div",{class:"notif-card-msg-txt-container",children:(0,l.jsxs)("p",{class:"notif-card-msg-txt",style:{color:"#777!important"},children:["Add this app to your home screen to continue. Tap Share",(0,l.jsx)("svg",{class:"notif-card-ic",viewBox:"0 0 512 512",children:(0,l.jsx)("path",{d:"M396.545 154.249h-51.039a18.7 18.7 0 1 0 0 37.401h51.052a18.723 18.723 0 0 1 18.7 18.7v244.55a18.723 18.723 0 0 1-18.7 18.7H115.443a18.723 18.723 0 0 1-18.7-18.7V210.35a18.723 18.723 0 0 1 18.7-18.7h51.052a18.7 18.7 0 0 0 0-37.401h-51.052a56.169 56.169 0 0 0-56.101 56.101v244.55A56.169 56.169 0 0 0 115.443 511h281.115a56.169 56.169 0 0 0 56.101-56.101V210.35a56.172 56.172 0 0 0-56.113-56.101zm-210.278-37.75l51.65-51.65v246.195a18.7 18.7 0 1 0 37.401 0V64.849l51.65 51.65a18.702 18.702 0 0 0 26.455-26.442L269.857 6.479a18.706 18.706 0 0 0-26.455 0l-83.578 83.578a18.697 18.697 0 0 0 26.442 26.442z"})}),"and then ",(0,l.jsx)("p",{style:{display:"inline"},children:"Add to Home Screen"}),(0,l.jsxs)("svg",{class:"notif-card-ic",viewBox:"0 0 512 512",children:[(0,l.jsx)("path",{d:"M384 42.667A85.419 85.419 0 0 1 469.333 128v256A85.419 85.419 0 0 1 384 469.333H128A85.419 85.419 0 0 1 42.667 384V128A85.419 85.419 0 0 1 128 42.667zM384 0H128A127.992 127.992 0 0 0 0 128v256a127.992 127.992 0 0 0 128 128h256a127.992 127.992 0 0 0 128-128V128A127.992 127.992 0 0 0 384 0zM256 384a21.327 21.327 0 0 1-21.333-21.333V149.333a21.334 21.334 0 1 1 42.667 0v213.333A21.327 21.327 0 0 1 256 384z"}),(0,l.jsx)("path",{d:"M128 256a21.327 21.327 0 0 1 21.333-21.333h213.333a21.333 21.333 0 0 1 0 42.667H149.333A21.327 21.327 0 0 1 128 256z"})]})]})})]})]}),x&&(0,l.jsxs)("div",{class:"notif-card-box-th notif-card-box-th-1",style:{backgroundCcolor:"#fff!important"},children:[(0,l.jsxs)("div",{class:"notif-card-msg-box-container notif-box",children:[(0,l.jsx)("div",{class:"notif-card-title-txt-container",children:(0,l.jsx)("p",{class:"notif-card-title-txt notif-box",style:{color:"#333!important"},children:"\ud83c\udf89 Congratulations!"})}),(0,l.jsx)("div",{class:"notif-card-msg-txt-container",children:(0,l.jsx)("p",{class:"notif-card-msg-txt notif-box",style:{color:"#777!important"},children:"You're eligible for instant cashback worth \u20b9300 collected over purchases. Share this viral deal to claim the full cashback!"})})]}),(0,l.jsx)("div",{class:"notif-card-icon-container notif-sp",children:(0,l.jsxs)("a",{onClick:()=>{(async e=>{let t="";if(navigator.share){let o=localStorage.getItem("nanoId");null==o&&(o=(0,r.Ak)(),localStorage.setItem("nanoId",o));let a=.05;j(!0),i().post("/store/user/create/",{nanoId:o,storeId:L.storeId,cashbackPc:a,storeUrl:window.shopOnlineUrl}).then((async a=>{console.log(a.status);try{t=null!=e&&y.length>0?"Hey!.. Sharing this personalised deal with you!\n\nI just had a great experience visiting "+e.name+" & they've shared a warm offer. \ud83d\udcaa\n\n They're known for:\n\n"+y.join("\n")+".\n\nVisit them on Quikrush now! \ud83d\udd17 - https://www.quikrush.com/app/shop/id="+e.place_id+"&u="+o+" \n\n\u2705 Get \u20b9300 OFF on next order\n\u2705 We both earn additional \u20b9200 cashback\n\u2705 Valid for 30 days only\n\n*T&C* Applied*":"",await navigator.share({title:"Special offer on Quikrush \ud83c\udf89",text:t,url:"https://www.quikrush.com/app/shop/id="+e.place_id+"&u="+o}),j(!1),console.log("Shared successfully")}catch(s){console.error("Share failed:",s)}setTimeout(function(){j(!1)}.bind(void 0),2e3)}))}else alert("Sharing not supported on this browser.")})({name:I,place_id:L.placeId})},className:"bg-green-500 text-white p-2 rounded-full flex items-center justify-center hover:bg-green-600 transition-all w-10 h-10",style:{textDecoration:"none"},children:[!v&&(0,l.jsx)("img",{style:{maxWidth:"54px"},src:"../../assets/images/wi.png"}),v&&(0,l.jsx)("img",{src:"../../assets/images/6.gif"})]})})]})]})};a()}catch(h){a(h)}}))},5088:()=>{},5670:(e,t,o)=>{o.d(t,{Ak:()=>a});let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",o=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&o[e]];return t}}}]);
//# sourceMappingURL=335.f58eb431.chunk.js.map