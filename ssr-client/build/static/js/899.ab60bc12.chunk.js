"use strict";(self.webpackChunkssr_client=self.webpackChunkssr_client||[]).push([[899],{9899:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var n=s(9643),i=s(7214),o=s.n(i),a=s(6507);function c(e){if(e>200&&e<500)return"\u20b9250 - \u20b91000";if(e>250&&e<1e3)return"\u20b9500 - \u20b91000";if(e>700&&e<2e3)return"\u20b91000 - \u20b92000";if(e>1500&&e<3e3)return"\u20b92000 - \u20b93000";if(e>=3e3){const t=1e3*Math.floor(e/1e3),s=t+1e3;return"\u20b9".concat(t," - \u20b9").concat(s)}return"Below \u20b9200"}const r=e=>{let{product:t,category:s,onProductClick:i}=e;console.log("--product--",t),console.log("--category--",s);const[o,r]=(0,n.useState)([]);return(0,n.useEffect)((()=>{(s||[]).forEach((e=>{-1!=e.indexOf(":")?o.push(e.split(":")[1]):o.push(e),r(o)}))}),[]),(0,a.jsxs)("div",{className:"product-card",onClick:e=>{console.log("--category queries--",o),console.log("--product category--",e.target.attributes["data-cat"].value),i(o,e.target.attributes["data-cat"].value)},children:[(0,a.jsx)("img",{"data-cat":t.categoryPath.replace(/\>/g," "),src:t.imageUrls["800x800"],alt:t.title,style:{height:"300px"}}),(0,a.jsxs)("div",{className:"card-content",style:{background:"linear-gradient(rgba(0, 0, 0, 0), rgb(0 0 0 / 0%)), url(".concat(t.imageUrls["800x800"],")"),filter:"blur(36px)",backgroundSize:"1px"},children:[(0,a.jsx)("h3",{style:{fontWeight:400},children:t.title}),(0,a.jsx)("p",{className:"category",children:t.categoryPath.split(">")[t.categoryPath.split(">").length-1]}),(0,a.jsxs)("p",{className:"price",children:["\u20b9",t.flipkartSpecialPrice.amount]})]}),(0,a.jsxs)("div",{className:"card-content-desc",children:[(0,a.jsx)("p",{className:"category",children:t.categoryPath.split(">")[t.categoryPath.split(">").length-1]}),(0,a.jsx)("p",{className:"price-range",children:c(t.flipkartSpecialPrice.amount)}),(0,a.jsx)("span",{className:"cta-wishlist price-range",children:"+ wishlist"})]})]})},l=e=>{let{gridLoading:t,products:s=[],onProductClick:n}=e;return(0,a.jsx)("div",{className:"product-grid ".concat(t?"grid-loading":""),children:s.map((e=>(0,a.jsx)(r,{onProductClick:n,product:e.productBaseInfoV1,category:e.categorySpecificInfoV1.keySpecs},e.productBaseInfoV1.productId)))})},d=e=>{let{searchPlaces:t}=e;return(0,n.useEffect)((()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition((e=>{console.log("GLatitude:",e.coords.latitude),console.log("GLongitude:",e.coords.longitude),document.getElementById("locMsg").style.display="none",window.selectedLat=e.coords.latitude,window.selectedLong=e.coords.longitude,t("fashion",window.placeQuery)}),(e=>{console.error("Error getting location:",e.message)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):console.error("Geolocation is not supported by this browser.")}),[]),(0,a.jsx)("div",{id:"locMsg",className:"loc-msg",children:(0,a.jsx)("p",{style:{marginBottom:"0px"},children:"Requesting location access (optional)..."})})},g=e=>{const[t,s]=(0,n.useState)({}),[i,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{o(!0),r(0,"categories")}),[]);const c=((e,t)=>{const s=[];let n=e;for(;n&&"object"===typeof n;){const e=Object.keys(n);s.push({data:n,keys:e});const i=t[s.length-1];if(!i||!n[i])break;n=n[i]}return s})(e,Object.values(t)),r=(e,t)=>{if(i&&(document.getElementById("sub-tabs").style.display="inline-block"),"categories"!==t&&(console.log("--levelIndex--",e),i)){if(window.filterStr=window.filterStr+","+t,e<window.filterStr.split(",").length){let s=window.filterStr.split(",");s.splice(e-1,0,t),s.length=e,window.filterStr=s.toString()}console.log("--filterStr--",window.filterStr),window.onFilter(t,window.filterStr)}s((s=>{const n={...s};return n[e]=t,Object.keys(n).filter((t=>parseInt(t)>e)).forEach((e=>delete n[e])),n}))};return(0,a.jsx)("div",{children:c.map(((e,s)=>s>0?(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"tabs",children:e.keys.map((e=>e.match(/^\d+$/)?null:(0,a.jsx)("div",{className:"tab ".concat(t[s]===e?"active":""),onClick:()=>r(s,e),children:e},e)))})},s):(0,a.jsx)("div",{})))})},u=()=>(0,a.jsxs)("div",{className:"loading-screen",children:[(0,a.jsx)("div",{className:"shimmer",children:(0,a.jsxs)("div",{class:"wrapper",children:[(0,a.jsx)("div",{class:"animate image-card"}),(0,a.jsx)("div",{class:"animate stroke title"}),(0,a.jsx)("div",{class:"animate stroke link"}),(0,a.jsx)("div",{class:"animate stroke description"})]})}),(0,a.jsx)("div",{class:"shimmer",children:(0,a.jsxs)("div",{class:"wrapper",children:[(0,a.jsx)("div",{class:"animate image-card"}),(0,a.jsx)("div",{class:"animate stroke title"}),(0,a.jsx)("div",{class:"animate stroke link"}),(0,a.jsx)("div",{class:"animate stroke description"})]})}),(0,a.jsx)("div",{class:"shimmer",children:(0,a.jsxs)("div",{class:"wrapper",children:[(0,a.jsx)("div",{class:"animate image-card"}),(0,a.jsx)("div",{class:"animate stroke title"}),(0,a.jsx)("div",{class:"animate stroke link"}),(0,a.jsx)("div",{class:"animate stroke description"})]})}),(0,a.jsx)("div",{class:"shimmer",children:(0,a.jsxs)("div",{class:"wrapper",children:[(0,a.jsx)("div",{class:"animate image-card"}),(0,a.jsx)("div",{class:"animate stroke title"}),(0,a.jsx)("div",{class:"animate stroke link"}),(0,a.jsx)("div",{class:"animate stroke description"})]})}),(0,a.jsx)("div",{class:"shimmer",children:(0,a.jsxs)("div",{class:"wrapper",children:[(0,a.jsx)("div",{class:"animate image-card"}),(0,a.jsx)("div",{class:"animate stroke title"}),(0,a.jsx)("div",{class:"animate stroke link"}),(0,a.jsx)("div",{class:"animate stroke description"})]})})]}),h=e=>{let{url:t,storeConfig:s}=e;const[i,c]=(0,n.useState)(""),[r,h]=(0,n.useState)([]),[p,w]=(0,n.useState)([]),[m,f]=(0,n.useState)({}),[x,v]=(0,n.useState)(0),[j,y]=(0,n.useState)(!1),[b,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(""),[P,I]=(0,n.useState)([]),[L,E]=(0,n.useState)(!1),[N,q]=(0,n.useState)(!1);let B={tabTrending:{1:[]},tabYourWishdrops:{1:[]}};window.addEventListener("scroll",(()=>{window.scrollY+window.innerHeight>=document.body.scrollHeight-30&&(console.log("Reached the end of the page!"),console.log("--unique queries--",window.uniqueQueries),console.log("--currentCategory--",window.currentCategory),window.scrollTo(0,280),o().get("/feed/search/trending/".concat(window.currentCategory," ").concat(window.uniqueQueries[0].replace(/\//g," "))).then(function(e){console.log("--trending response.data--",e.data);e.data;I(e.data),window.uniqueQueries.shift()}.bind(void 0)))})),(0,n.useEffect)((()=>{k(!0),f(B.tabTrending),o().get("/feed/categories").then((function(e){B.tabTrending=e.data.split(",");const t=e.data.split(",");let s=new Object;for(var n in t)s[t[n]]=[];B.tabTrending=s,f(B.tabTrending),C(e.data.split(",").slice(0,5).join());const i=e.data.split(",").slice(1,4),a=e.data.split(",").slice(e.data.split(",").length-4,e.data.split(",").length);let c=i.concat(a);C(c.join()),window.trendingProductsArr=[];for(var r in c)o().get("/feed/search/trending/".concat(c[r])).then(function(e){console.log("--trending response.data--",e.data);let t=e.data,s=P.concat(t);console.log("-fArr.length-",s.length),window.trendingProductsArr=window.trendingProductsArr.concat(s),console.log("-trendingProducts.length-",P.length),console.log("-trendingProducts-",P)}.bind(this))})),setTimeout(function(){console.log("--window.trendingProductsArr--",window.trendingProductsArr),I(window.trendingProductsArr),console.log("--final trending products--",P)}.bind(void 0),3e3)}),[]),console.log("--store c1111--",s);const Q=(e,t)=>{v(x+1),document.getElementById("tabTrending").classList.remove("active"),document.getElementById("tabYourWishdrops").classList.remove("active"),document.getElementById(t).classList.add("active"),document.getElementById("sub-tabs").style.display="inline-block";const s=document.getElementById("sub-tabs");if(s){s.querySelectorAll(".active").forEach((e=>e.classList.remove("active")))}console.log("categoriesList[tabId]: ",B[t]),f(B[t]),T(t.replace("tab",""),window.placeQuery)};r.length,b&&(window.onFilter=(e,t)=>{console.log("-selected-",e),window.selectedCatId=e,T(e,window.placeQuery),console.log("-filters-"+t+"-");let s=t;I([]),window.selFilter=t,o().get("/feed/search/trending/".concat(t)).then(function(e){console.log("--trending response.data--",e.data);e.data;I(e.data),window.currentCategory=e.data[0].productBaseInfoV1.categoryPath.replace(/\>/g," ");let t=e.data||[],s=[];for(var n in t)(t[n].categorySpecificInfoV1.keySpecs||[]).forEach((e=>{-1!=e.indexOf(":")?s.push(e.split(":")[1]):s.push(e)}));console.log("-queries--",s);const i=[...new Set(s)];console.log("--un--",i),window.uniqueQueries=i}.bind(void 0));const n=p.filter((e=>e.highlights.trim().indexOf(s.trim())>=0));console.log("--newArr--",n),h(n)});const T=(e,t)=>{y(!0),o().get("/shops/search/".concat(""!=e?e:"undefined","/").concat(""!=t?encodeURI(t):"undefined","/").concat(window.selectedLat,"/").concat(window.selectedLong)).then((function(e){const t=e.data;h(t.results),y(!1)}))};return(0,a.jsxs)("div",{className:"main",children:[(0,a.jsx)(d,{searchPlaces:T}),(0,a.jsxs)("div",{class:"container",children:[(0,a.jsx)("h1",{style:{marginLeft:"16px",display:"none"},children:"Shops near you:"}),(0,a.jsxs)("div",{class:"shop-search-c",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search products, wishlist or stores",onKeyUp:e=>{if("Enter"===e.key){const t=e.target.value;window.placeQuery=t;let s="fashion";null==window.selectedCatId&&(window.selectedCatId=s),T(window.selectedCatId,t)}}}),(0,a.jsx)("img",{src:"../../assets/images/magnifying.png"})]}),(0,a.jsxs)("div",{class:"tabs-container shop",children:[(0,a.jsxs)("div",{class:"tabs",id:"main-tabs",children:[(0,a.jsx)("div",{id:"tabTrending",class:"tab active",onClick:()=>Q(0,"tabTrending"),children:"\u26a1 Trending"}),(0,a.jsx)("div",{id:"tabYourWishdrops",class:"tab",onClick:()=>Q(0,"tabYourWishdrops"),children:"Your Wishdrops"})]}),(0,a.jsx)("div",{class:"sub-tabs",id:"sub-tabs",style:{marginBottom:"0",marginTop:"-16px"},children:x>=0&&(0,a.jsx)(g,{categories:m})})]}),!j&&L&&(0,a.jsxs)("span",{children:[" ",(0,a.jsx)("img",{className:"modal-left-arrow img-bck",src:"../../assets/images/left-arrow.png",onClick:()=>{q(!0),document.body.classList.add("no-scroll"),o().get("/feed/search/trending/".concat(window.selFilter)).then(function(e){console.log("--trending response.data--",e.data);e.data;I(e.data),window.uniqueQueries.shift(),q(!1),document.body.classList.remove("no-scroll")}.bind(void 0)),E(!1)}}),(0,a.jsxs)("span",{className:"lbl-back",children:["Back to ",window.currentCategory]})]}),!j&&(0,a.jsx)(l,{gridLoading:N,products:P,onProductClick:(e,t)=>{console.log("--onProductClick queries--",e),console.log("--onProductClick cat--",t),window.uniqueQueries=e,window.currentCategory=t,q(!0),document.body.classList.add("no-scroll"),o().get("/feed/search/trending/".concat(window.currentCategory," ").concat(window.uniqueQueries[0].replace(/\//g," "))).then(function(e){console.log("--trending response.data--",e.data);e.data;I(e.data),window.uniqueQueries.shift(),q(!1),document.body.classList.remove("no-scroll")}.bind(void 0)),E(!0)}}),j&&(0,a.jsx)(u,{})]})]})}}}]);
//# sourceMappingURL=899.ab60bc12.chunk.js.map