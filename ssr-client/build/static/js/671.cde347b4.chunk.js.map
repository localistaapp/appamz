{"version":3,"file":"static/js/671.cde347b4.chunk.js","mappings":"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","sources":["store/mainview/onlineorders/OnlineOrders.js"],"sourcesContent":["import { useState, createRef, useEffect } from \"react\";\nimport axios from 'axios';\nimport \"./OnlineOrders.css\";\n\nconst OrdersList = ({orders}) => {\n    const [showOrderDetail, setShowOrderDetail] = useState(false);\n    const [orderCreatedAt, setOrderCreatedAt] = useState('');\n    const [orderId, setOrderId] = useState('');\n    const [orderName, setOrderName] = useState('');\n    const [orderMobile, setOrderMobile] = useState('');\n    const [orderAddress, setOrderAddress] = useState('');\n    const [orderPincode, setOrderPincode] = useState('');\n    const [orderPrice, setOrderPrice] = useState('');\n    const [orderStatus, setOrderStatus] = useState('');\n    const [orderSchedule, setOrderSchedule] = useState('');\n    const [orderFromUrl, setOrderFromUrl] = useState('');\n    const [orderSlot, setOrderSlot] = useState('');\n    const [storeName, setStoreName] = useState('');\n    const [trackingLink, setTrackingLink] = useState('');\n\n    const onCloseClick = () => {\n      setShowOrderDetail(false);\n    }\n\n    const onOrderClicked = (o,totalPrice,orderString) => {\n      setOrderId(o.id);\n      setOrderCreatedAt(o.created_at);\n      setOrderName(o.name);\n      setOrderMobile(o.mobile);\n      setOrderAddress(o.address);\n      setOrderPincode(o.delivery_pincode);\n      setOrderPrice(totalPrice);\n      setOrderStatus(o.status);\n      setOrderSchedule(o.delivery_schedule);\n      setOrderSlot(o.delivery_timeslot);\n      setTrackingLink(o.tracking_link);\n      setOrderFromUrl(o.from_url);\n      let fromUrl = o.from_url;\n      let fromStoreName = fromUrl.split('/')[4];\n      setStoreName(fromStoreName);\n      setShowOrderDetail(true);\n    }\n\n    const onTrackingUpdate = () => {\n\n    }\n\n    const onAccept = () => {\n      const prof = sessionStorage.getItem('user-profile');\n      const supportMob = JSON.parse(prof).supportMobile;\n      axios.post(`/store/web-order/update`, {onlineOrderId: orderId, trackingLink: 'www.slimcrust.com/yp.html?oid='+orderId+'&amt='+orderPrice+'&mob='+orderMobile+'&supportMob='+supportMob+'&fromUrl='+orderFromUrl}).then((response) => {\n        console.log(response.status);\n        window.open(`https://wa.me/+91${orderMobile}?text=Hello!%20Your%20order%20has%20been%20accepted%20by%20${storeName}!%20Please%20make%20your%20payment%20on%20the%20app%20to%20confirm%20at%20${orderFromUrl}`,'_blank');\n      });\n    }\n \n    return (\n      <div>\n      <div className=\"product-list\">\n        {orders.length > 0 && orders.map((o, index) => {\n          let orderString = '';\n          let totalPrice = 0;\n          let itemImgsrc = '';\n\n          Object.values(JSON.parse(o.order)).forEach((obj, index)=>{\n            console.log('--obj--', obj);\n            orderString = orderString + `${obj.qty} ${obj.name} , `;\n            totalPrice = totalPrice + obj.price;\n            if (index == 0) {\n              itemImgsrc = obj.itemSrc;\n            }\n          });\n          \n          orderString = orderString.substring(0,orderString.length-2);\n          totalPrice = totalPrice + 750;\n          //handle 2rs sample product\n          if (Math.round(totalPrice) == 752) {\n            totalPrice = 2;\n          }\n\n          return (\n            <div key={index} className=\"card\" onClick={()=>{onOrderClicked(o,totalPrice,orderString)}} >\n              <img src={itemImgsrc} />\n              <div className=\"card-content\">\n                <div className=\"description order-desc\">{orderString}</div>\n                <div className=\"price\">\n                  <div className=\"price-current\">₹{totalPrice}</div>\n                </div>\n                <br/>\n                <div className=\"description\" style={{display: 'inline'}}>{o.name} - {o.mobile}</div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      <div className=\"address-container\" style={{display: showOrderDetail == true ? 'block' : 'none'}}>\n        <div className=\"close-icn\" onClick={onCloseClick}><img src='../../assets/images/ic_close.png'></img></div>\n        <div className=\"cnt\">\n            <div>Created At: {orderCreatedAt}</div>\n            <div>{orderName}</div>\n            <div>{orderMobile}</div>\n            <div>{orderAddress}</div>\n            <div>{orderPincode}</div>\n            <div className='price-lbl'>₹{orderPrice}</div>\n            {orderStatus != 'PAID'  && <div className='input-delivery'><input id=\"trackingLinkElemId\" type='text' value={trackingLink} placeholder='Enter tracking link' /></div>}\n            {orderStatus != 'PAID'  && <><a className='price-btn' onClick={()=>{onAccept()}} style={{left: '0px', width: '120px', margin: '0 auto', float: 'left', marginLeft: '26px', background: 'linear-gradient(0deg, #16b95e, #26c36b 35%, #39d980)'}}>Accept</a><a className='price-btn' onClick={()=>{onTrackingUpdate(document.getElementById('trackingLinkElemId').value);}} style={{right: '20px', float: 'right', width: '189px', margin: '0 auto', right: '20px'}}>Update Delivery</a></>}\n            <div>{orderSchedule == 'now' ? 'DELIVER NOW' : ''}</div>\n            {orderSlot != 'unknown' && <div>{orderSlot}</div>}\n        </div>\n        \n    </div>\n      </div>\n    );\n  };\n\nconst LoadingShimmer = () => <div className=\"loading-screen\"><div className=\"shimmer\"><div class=\"wrapper\"><div class=\"animate image-card\"></div><div class=\"animate stroke title\"></div><div class=\"animate stroke link\"></div><div class=\"animate stroke description\"></div></div></div><div class=\"shimmer\"><div class=\"wrapper\"><div class=\"animate image-card\"></div><div class=\"animate stroke title\"></div><div class=\"animate stroke link\"></div><div class=\"animate stroke description\"></div></div></div><div class=\"shimmer\"><div class=\"wrapper\"><div class=\"animate image-card\"></div><div class=\"animate stroke title\"></div><div class=\"animate stroke link\"></div><div class=\"animate stroke description\"></div></div></div><div class=\"shimmer\"><div class=\"wrapper\"><div class=\"animate image-card\"></div><div class=\"animate stroke title\"></div><div class=\"animate stroke link\"></div><div class=\"animate stroke description\"></div></div></div><div class=\"shimmer\"><div class=\"wrapper\"><div class=\"animate image-card\"></div><div class=\"animate stroke title\"></div><div class=\"animate stroke link\"></div><div class=\"animate stroke description\"></div></div></div></div>;\n  \n\nconst OnlineOrders = ({url}) => {\n\n    const [message, setMessage] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(true);\n    const [orders, setOrders] = useState([]);\n\n    let storeId = 0;\n        try {\n            storeId = JSON.parse(window.sessionStorage.getItem('user-profile')).storeId;\n        } catch(e) {\n            console.log('error');\n        }\n\n    if (orders.length == 0) {\n      axios.get(`/web-orders/${storeId}`)\n      .then(function (response) {\n        if(response.data != 'auth error') {\n            console.log('--orders res--', JSON.stringify(response.data));\n            setIsLoading(false);\n            setOrders(response.data);\n        }\n      }.bind(this));\n    }\n\n    setTimeout(()=>setIsLoading(false),2000);\n\n    return (\n        <div className=\"main\">\n           <div class=\"container\">\n                <h1 style={{marginLeft: '16px'}}>Online Orders</h1>\n                {!isLoading && <OrdersList orders={orders} />}\n                {isLoading && <LoadingShimmer/>}\n            </div>\n        </div>\n    );\n}\n\nexport default OnlineOrders;\n"],"names":["OrdersList","_ref","orders","showOrderDetail","setShowOrderDetail","useState","orderCreatedAt","setOrderCreatedAt","orderId","setOrderId","orderName","setOrderName","orderMobile","setOrderMobile","orderAddress","setOrderAddress","orderPincode","setOrderPincode","orderPrice","setOrderPrice","orderStatus","setOrderStatus","orderSchedule","setOrderSchedule","orderFromUrl","setOrderFromUrl","orderSlot","setOrderSlot","storeName","setStoreName","trackingLink","setTrackingLink","_jsxs","children","_jsx","className","length","map","o","index","orderString","totalPrice","itemImgsrc","Object","values","JSON","parse","order","forEach","obj","console","log","concat","qty","name","price","itemSrc","substring","Math","round","onClick","onOrderClicked","id","created_at","mobile","address","delivery_pincode","status","delivery_schedule","delivery_timeslot","tracking_link","from_url","fromStoreName","split","src","style","display","onCloseClick","type","value","placeholder","_Fragment","onAccept","prof","sessionStorage","getItem","supportMob","supportMobile","axios","onlineOrderId","then","response","window","open","left","width","margin","float","marginLeft","background","document","getElementById","right","LoadingShimmer","class","_ref2","url","message","setMessage","isLoading","setIsLoading","setOrders","storeId","e","data","stringify","bind","setTimeout"],"sourceRoot":""}