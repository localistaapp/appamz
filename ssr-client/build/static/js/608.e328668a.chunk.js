"use strict";(self.webpackChunkssr_client=self.webpackChunkssr_client||[]).push([[608],{2608:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(9643),n=s(7214),o=s.n(n),i=s(5670),r=s(6507);function c(e){if(e>200&&e<500)return"Usually \u20b91500+";if(e>250&&e<1e3)return"Usually \u20b91800+";if(e>700&&e<2e3)return"Usually \u20b92500+";if(e>1500&&e<3e3)return"Usually \u20b93500+";if(e>=3e3){const t=1e3*Math.floor(e/1e3),s=t+1e3;return"\u20b9".concat(t," - \u20b9").concat(s)}return"Usually \u20b9500+"}function l(){const e=["Jayanagar","Indiranagar","Koramangala","BTM Layout","Church Street","JP Nagar"];return e[Math.floor(Math.random()*e.length)]}function d(e){if(e>200&&e<500)return"Get it for under \u20b91200 from "+l();if(e>250&&e<1e3)return"Get it for under \u20b91500 from "+l();if(e>700&&e<2e3)return"Get it for under \u20b92200 from "+l();if(e>1500&&e<3e3)return"Get it for under \u20b93100 from "+l();if(e>=3e3){const t=1e3*Math.floor(e/1e3);return"Get it for under \u20b9".concat(1.2*(t+1e3)*.8," from ")+l()}return"Get it for even less from "+l()}const u=e=>{let{product:t,category:s,onProductClick:n,onFavCreated:i,onFavRequestComplete:l}=e;console.log("--product--",t),console.log("--category--",s);const[u,g]=(0,a.useState)([]);(0,a.useEffect)((()=>{(s||[]).forEach((e=>{-1!=e.indexOf(":")?u.push(e.split(":")[1]):u.push(e),g(u)}))}),[]);return(0,r.jsxs)("div",{className:"product-card",onClick:e=>{console.log("--category queries--",u),console.log("--product category--",e.target.attributes["data-cat"].value),n(u,e.target.attributes["data-cat"].value)},children:[(0,r.jsx)("img",{"data-cat":t.categoryPath.replace(/\>/g," "),src:t.imageUrls["800x800"],alt:t.title,style:{height:"300px"}}),(0,r.jsxs)("div",{className:"card-content",style:{background:"linear-gradient(rgba(0, 0, 0, 0), rgb(0 0 0 / 0%)), url(".concat(t.imageUrls["800x800"],")"),filter:"blur(36px)",backgroundSize:"1px"},children:[(0,r.jsx)("h3",{style:{fontWeight:400},children:t.title}),(0,r.jsx)("p",{className:"category",children:t.categoryPath.split(">")[t.categoryPath.split(">").length-1]}),(0,r.jsxs)("p",{className:"price",children:["\u20b9",t.flipkartSpecialPrice.amount]})]}),(0,r.jsxs)("div",{className:"card-content-desc",children:[(0,r.jsx)("p",{className:"price-range",children:c(t.flipkartSpecialPrice.amount)}),(0,r.jsx)("p",{className:"price-range get-it-for",children:d(t.flipkartSpecialPrice.amount)}),(0,r.jsx)("span",{className:"cta-wishlist price-range",onClick:()=>((e,t)=>{console.log("--fav product--",e),console.log("--fav category--",t);var s=e.title,a=localStorage.getItem("nanoId"),n=(e.attributes.color+","||0)+" "+t.join(),r=e.flipkartSpecialPrice.amount,c=e.productUrl,d=e.imageUrls["800x800"];i(),o().post("/user-favs/create",{title:s,nanoid:a,highlights:n,price:r,url:c,imgUrl:d}).then((e=>{l(),console.log("--Create Product Response--",e)}))})(t,s),children:"\u2661 Favourite for Deals"})]})]})},g=e=>{let{gridLoading:t,products:s=[],onProductClick:a,onFavCreated:n,onFavRequestComplete:o}=e;return console.log("--Grid Loading--",t),(0,r.jsx)("div",{className:"product-grid ".concat(t?"grid-loading":""),children:s.map((e=>(0,r.jsx)(u,{onFavCreated:n,onFavRequestComplete:o,onProductClick:a,product:e.productBaseInfoV1,category:e.categorySpecificInfoV1.keySpecs},e.productBaseInfoV1.productId)))})},h=e=>{let{products:t=[],storeSearchIntent:s}=e;return console.log("-store search products--",t),(0,r.jsxs)("div",{className:"product-grid store-product-grid",children:[(0,r.jsxs)("div",{className:"store-search-title",children:["\u23f1\ufe0f Deals on ",s," from ",t[0].name," ",t[0].locality]}),t.map(((e,a)=>(0,r.jsxs)("div",{className:"product-card store-product-card",onClick:e=>{window.location.href=t[0].app_url+s},children:[(0,r.jsx)("img",{src:e.image_url,alt:e.title,style:{height:"150px"}}),(0,r.jsx)("div",{className:"store-deal",children:"22% OFF"})]})))]})},p=e=>{let{gridLoading:t,products:s=[]}=e;return console.log("--favourites products--",s),(0,r.jsx)("div",{children:s.map((e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"product-card scale-down favourited",children:[(0,r.jsx)("div",{className:"favd",children:"Favourited by you"}),(0,r.jsx)("img",{src:e.img_url,alt:e.title,style:{height:"300px",objectFit:"cover !important",margin:"0px"}}),(0,r.jsxs)("div",{className:"card-content",children:[(0,r.jsx)("h3",{style:{fontWeight:400,color:"#757575"},children:e.price}),(0,r.jsx)("h3",{style:{fontWeight:400,color:"#757575"},children:e.highlights.split(",").slice(1).join()})]})]}),(0,r.jsx)("div",{className:"favd-grid-title",children:"Deals on similar products"}),(0,r.jsxs)("div",{className:"favd-grid product-grid ".concat(t?"grid-loading":""),children:[console.log("--actual product--",e),JSON.parse(e.related).length>0&&JSON.parse(e.related).map((e=>(0,r.jsxs)("div",{className:"product-card",onClick:t=>{window.location.href=e.product_link},children:[(0,r.jsx)("img",{src:e.thumbnail,alt:e.title,style:{height:"300px"}}),(0,r.jsxs)("div",{className:"card-content",style:{background:"linear-gradient(rgba(0, 0, 0, 0), rgb(0 0 0 / 0%)), url(".concat(e.thumbnail,")"),filter:"blur(36px)",backgroundSize:"1px"},children:[(0,r.jsx)("h3",{style:{fontWeight:400},children:e.title}),(0,r.jsxs)("p",{className:"price",children:["\u20b9",e.price]})]}),(0,r.jsxs)("div",{className:"card-content-desc",children:[(0,r.jsx)("p",{className:"price-range",children:e.price}),(0,r.jsx)("span",{className:"cta-shop favd",style:{background:"#8f8f8f96"},onClick:()=>{window.location.href=e.product_link},children:"Online Deal"})]})]})))," "]})]})))})},m=e=>{let{searchPlaces:t}=e;return(0,a.useEffect)((()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition((e=>{console.log("GLatitude:",e.coords.latitude),console.log("GLongitude:",e.coords.longitude),document.getElementById("locMsg").style.display="none",window.selectedLat=e.coords.latitude,window.selectedLong=e.coords.longitude}),(e=>{console.error("Error getting location:",e.message)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):console.error("Geolocation is not supported by this browser.");let e=localStorage.getItem("nanoId");null==e&&(e=(0,i.Ak)(),localStorage.setItem("nanoId",e))}),[]),(0,r.jsx)("div",{id:"locMsg",className:"loc-msg",children:(0,r.jsx)("p",{style:{marginBottom:"0px"},children:"Requesting location access (optional)..."})})},f=e=>{const[t,s]=(0,a.useState)({}),[n,o]=(0,a.useState)(!1),[i,c]=(0,a.useState)(!1);(0,a.useEffect)((()=>{o(!0),d(0,"categories")}),[]);const l=((e,t)=>{const s=[];let a=e;for(;a&&"object"===typeof a;){const e=Object.keys(a);s.push({data:a,keys:e});const n=t[s.length-1];if(!n||!a[n])break;a=a[n]}return s})(e,Object.values(t)),d=(e,t)=>{if(n&&(document.getElementById("sub-tabs").style.display="inline-block"),"Stores"==t&&document.querySelectorAll(".tabs")[1].children[0].classList.remove("active"),"categories"!==t&&"Deals on Favourites"!==t&&"Stores"!==t&&(console.log("--levelIndex--",e),n)){if(window.filterStr=window.filterStr+","+t,e<window.filterStr.split(",").length){let s=window.filterStr.split(",");s.splice(e-1,0,t),s.length=e,window.filterStr=s.toString()}console.log("--filterStr--",window.filterStr),window.onFilter(t,window.filterStr),c(!0)}s((s=>{const a={...s};return a[e]=t,Object.keys(a).filter((t=>parseInt(t)>e)).forEach((e=>delete a[e])),a}))};return(0,r.jsxs)("div",{children:[i&&(0,r.jsx)("span",{className:"btn-reset",onClick:()=>{window.location.reload()},children:"\u27f3"}),l.map(((e,s)=>s>0?(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"tabs",children:e.keys.map((e=>e.match(/^\d+$/)?null:(0,r.jsx)("div",{className:"tab ".concat(t[s]===e?"active":""),onClick:()=>d(s,e),children:e},e)))})},s):(0,r.jsx)("div",{})))]})},w=()=>(0,r.jsxs)("div",{className:"loading-screen",children:[(0,r.jsx)("div",{className:"shimmer",children:(0,r.jsxs)("div",{class:"wrapper",children:[(0,r.jsx)("div",{class:"animate image-card"}),(0,r.jsx)("div",{class:"animate stroke title"}),(0,r.jsx)("div",{class:"animate stroke link"}),(0,r.jsx)("div",{class:"animate stroke description"})]})}),(0,r.jsx)("div",{class:"shimmer",children:(0,r.jsxs)("div",{class:"wrapper",children:[(0,r.jsx)("div",{class:"animate image-card"}),(0,r.jsx)("div",{class:"animate stroke title"}),(0,r.jsx)("div",{class:"animate stroke link"}),(0,r.jsx)("div",{class:"animate stroke description"})]})}),(0,r.jsx)("div",{class:"shimmer",children:(0,r.jsxs)("div",{class:"wrapper",children:[(0,r.jsx)("div",{class:"animate image-card"}),(0,r.jsx)("div",{class:"animate stroke title"}),(0,r.jsx)("div",{class:"animate stroke link"}),(0,r.jsx)("div",{class:"animate stroke description"})]})}),(0,r.jsx)("div",{class:"shimmer",children:(0,r.jsxs)("div",{class:"wrapper",children:[(0,r.jsx)("div",{class:"animate image-card"}),(0,r.jsx)("div",{class:"animate stroke title"}),(0,r.jsx)("div",{class:"animate stroke link"}),(0,r.jsx)("div",{class:"animate stroke description"})]})}),(0,r.jsx)("div",{class:"shimmer",children:(0,r.jsxs)("div",{class:"wrapper",children:[(0,r.jsx)("div",{class:"animate image-card"}),(0,r.jsx)("div",{class:"animate stroke title"}),(0,r.jsx)("div",{class:"animate stroke link"}),(0,r.jsx)("div",{class:"animate stroke description"})]})})]}),v=e=>{let{url:t,storeConfig:s}=e;const[n,i]=(0,a.useState)(""),[c,l]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[v,x]=(0,a.useState)({}),[j,y]=(0,a.useState)(0),[b,k]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),[N,I]=(0,a.useState)(""),[F,q]=(0,a.useState)([]),[L,P]=(0,a.useState)([]),[U,E]=(0,a.useState)([]),[R,Q]=(0,a.useState)([]),[T,B]=(0,a.useState)(!1),[A,O]=(0,a.useState)(!1),[G,W]=(0,a.useState)(!0),[M,V]=(0,a.useState)(""),[_,D]=(0,a.useState)(!1),[Y,J]=(0,a.useState)(!0),[K,H]=(0,a.useState)(1),[z,X]=(0,a.useState)(0);let Z={tabTrending:{Women:{1:[]},Men:{1:[]},"Kids - Girls":{girls:{"1-to-6":{jumpsuits:0,dresses:0,skirts:0,tops:0},"6-to-14":{jackets:0,dresses:0}}},"Kids - Boys":{"1-to-6":{denims:0,shirts:0},"6-to-14":{shoes:0}}},tabYourWishdrops:{"Deals on Favourites":{1:[]},Stores:{1:[]}}};window.addEventListener("scroll",(()=>{if(window.scrollY+window.innerHeight>=document.body.scrollHeight-30){console.log("Reached the end of the page!"),console.log("--unique queries--",window.uniqueQueries),console.log("--currentCategory--",window.currentCategory),window.scrollTo(0,280);let e=encodeURIComponent("".concat(window.allFilters," ").concat(window.uniqueQueries[0].replace(/\//g," ")));""!=window.searchQueried&&(e=encodeURIComponent("".concat(window.searchQueried,"  ").concat(window.allFilters," ").concat(window.uniqueQueries[0].replace(/\//g," ")))),o().get("/feed/search/trending/".concat(e)).then(function(e){console.log("--trending response.data--",e.data);e.data;q(e.data),window.uniqueQueries.shift()}.bind(void 0))}})),(0,a.useEffect)((()=>{window.allFilters="",C(!0),setTimeout((()=>{let e=encodeURIComponent("Women");k(!0),o().get("/feed/search/trending/".concat(e)).then(function(e){console.log("--trending response.data--",e.data),x(Z.tabTrending);e.data;k(!1),q(e.data),window.currentCategory=e.data[0].productBaseInfoV1.categoryPath.replace(/\>/g," ");let t=e.data||[],s=[];for(var a in t)(t[a].categorySpecificInfoV1.keySpecs||[]).forEach((e=>{-1!=e.indexOf(":")?s.push(e.split(":")[1]):s.push(e)}));console.log("-queries--",s);const n=[...new Set(s)];console.log("--un--",n),window.uniqueQueries=n}.bind(void 0))}),1500),o().get("/feed/categories").then((function(e){}))}),[]),console.log("--store c1111--",s);const $=(e,t)=>{if("trending"==e)window.location.reload();else{J(!1),x(Z.tabYourWishdrops),setTimeout((()=>{document.querySelectorAll(".tabs")[1].children[0].classList.add("active")}),200),document.getElementById("tabTrending").classList.remove("active"),document.getElementById("tabYourWishdrops").classList.add("active"),null!=document.querySelector(".btn-reset")&&(document.querySelector(".btn-reset").style.display="none");let e=localStorage.getItem("nanoId");k(!0),o().get("/feed/search/favourites/".concat(e)).then((function(e){k(!1),console.log("--favourites response.data--",e.data),Q(e.data)}))}y(j+1),document.getElementById("sub-tabs").style.display="inline-block";const s=document.getElementById("sub-tabs");if(s){s.querySelectorAll(".active").forEach((e=>e.classList.remove("active")))}console.log("categoriesList[tabId]: ",Z[t])};c.length,S&&(window.onFilter=(e,t)=>{console.log("-selected-",e),window.selectedCatId=e,ee(e,window.placeQuery),console.log("-filters-"+t+"-");let s=t;q([]),window.selFilter=t,window.allFilters=window.allFilters+" "+e;let a=encodeURIComponent("".concat(window.allFilters," ").concat(t));o().get("/feed/search/trending/".concat(a)).then(function(e){console.log("--trending response.data--",e.data);e.data;q(e.data),window.currentCategory=e.data[0].productBaseInfoV1.categoryPath.replace(/\>/g," ");let t=e.data||[],s=[];for(var a in t)(t[a].categorySpecificInfoV1.keySpecs||[]).forEach((e=>{-1!=e.indexOf(":")?s.push(e.split(":")[1]):s.push(e)}));console.log("-queries--",s);const n=[...new Set(s)];console.log("--un--",n),window.uniqueQueries=n,document.querySelectorAll(".tabs-container.shop")[0].scrollLeft=0}.bind(void 0)),o().get("/feed/categories/".concat(window.allFilters," ").concat(e)).then((function(e){Z.tabTrending=e.data.split(",");const t=e.data.split(",");let s=new Object;for(var a in t)s[t[a]]=[];Z.tabTrending=s,x(Z.tabTrending),I(e.data.split(",").slice(0,5).join());const n=e.data.split(",").slice(1,4),i=e.data.split(",").slice(e.data.split(",").length-4,e.data.split(",").length);let r=n.concat(i);I(r.join()),window.trendingProductsArr=[];for(var c in r){let e=encodeURIComponent("".concat(window.allFilters," ").concat(r[c]));o().get("/feed/search/trending/".concat(e)).then(function(e){console.log("--trending response.data--",e.data);let t=e.data,s=F.concat(t);console.log("-fArr.length-",s.length),window.trendingProductsArr=window.trendingProductsArr.concat(s),console.log("-trendingProducts.length-",F.length),console.log("-trendingProducts-",F)}.bind(this))}}));const n=d.filter((e=>e.highlights.trim().indexOf(s.trim())>=0));console.log("--newArr--",n),l(n)});const ee=(e,t)=>{k(!0),o().get("/shops/search/".concat(""!=e?e:"undefined","/").concat(""!=t?encodeURI(t):"undefined","/").concat(window.selectedLat,"/").concat(window.selectedLong)).then((function(e){const t=e.data;l(t.results),k(!1)}))},te=e=>{7!=K&&(H(e+1),setTimeout((()=>{te(e+1)}),5e3))};return(0,r.jsxs)("div",{className:"main",children:[(0,r.jsx)(m,{searchPlaces:ee}),(0,r.jsxs)("div",{class:"container",children:[(0,r.jsx)("h1",{style:{marginLeft:"16px",display:"none"},children:"Shops near you:"}),(0,r.jsxs)("div",{class:"shop-search-c",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search products, favourites or stores",onKeyUp:e=>{if("Enter"===e.key){const t=e.target.value;window.placeQuery=t;let s="fashion";null==window.selectedCatId&&(window.selectedCatId=s),V(t),window.searchQueried=t,k(!0),o().get("/feed/search/keyword/".concat(encodeURIComponent(t))).then(function(e){console.log("--trending response.data--",e.data),k(!1);e.data;q(e.data),window.uniqueQueries.shift(),O(!1),document.body.classList.remove("no-scroll")}.bind(void 0)),o().get("/feed/store-search/keyword/".concat(encodeURIComponent(t))).then(function(e){console.log("--store search response.data--",e.data);e.data.results;P(e.data.results),E(e.data.meta.intent)}.bind(void 0))}}}),(0,r.jsx)("img",{src:"../../assets/images/magnifying.png"})]}),z>0&&(0,r.jsx)("div",{className:"notif-pill",children:"1"}),(0,r.jsxs)("div",{class:"tabs-container shop",children:[(0,r.jsxs)("div",{class:"tabs",id:"main-tabs",children:[(0,r.jsx)("div",{id:"tabTrending",class:"tab active",onClick:()=>$("trending","trending-container"),children:"\u26a1 Trending"}),(0,r.jsx)("div",{id:"tabYourWishdrops",class:"tab",onClick:()=>{$("favourites","favourites-container")},children:"\ud83d\udccb Your Favourites"})]}),(0,r.jsx)("div",{class:"sub-tabs",id:"sub-tabs",style:{marginBottom:"0",marginTop:"-16px",marginLeft:"26px"},children:j>=0&&(0,r.jsx)(f,{categories:v})})]}),!b&&T&&(0,r.jsxs)("span",{children:[" ",(0,r.jsx)("img",{className:"modal-left-arrow img-bck",src:"../../assets/images/left-arrow.png",onClick:()=>{O(!0),document.body.classList.add("no-scroll"),o().get("/feed/search/trending/".concat(window.selFilter)).then(function(e){console.log("--trending response.data--",e.data);e.data;q(e.data),window.uniqueQueries.shift(),O(!1),document.body.classList.remove("no-scroll")}.bind(void 0)),B(!1)}}),(0,r.jsxs)("span",{className:"lbl-back",children:["Back to ",window.currentCategory]})]}),L.length>0&&(0,r.jsx)(h,{products:L,storeSearchIntent:U}),!b&&Y&&(0,r.jsx)(g,{onFavCreated:()=>{D(!0),te(0)},onFavRequestComplete:()=>{D(!1),H(1),X(1)},gridLoading:A,products:F,onProductClick:(e,t)=>{console.log("--onProductClick queries--",e),console.log("--onProductClick cat--",t),window.uniqueQueries=e,window.currentCategory=t,O(!0),document.body.classList.add("no-scroll"),""!=M&&(window.allFilters=M+window.allFilters);let s=encodeURIComponent("".concat(window.allFilters," ").concat(window.uniqueQueries[0].replace(/\//g," ")));o().get("/feed/search/trending/".concat(s)).then(function(e){console.log("--trending response.data--",e.data);e.data;q(e.data),window.uniqueQueries.shift(),O(!1),document.body.classList.remove("no-scroll")}.bind(void 0)),B(!0)}}),!b&&!Y&&R.length>0&&(0,r.jsx)(p,{gridLoading:A,products:R}),_&&(0,r.jsxs)("div",{className:"loaderc",children:[1==K&&(0,r.jsx)("span",{className:"lbl-c",children:"Fetching deals on your favourites..."}),2==K&&(0,r.jsx)("span",{className:"lbl-c",children:"Searching product catalog..."}),3==K&&(0,r.jsx)("span",{className:"lbl-c",children:"Product catalog searched \u2705"}),4==K&&(0,r.jsx)("span",{className:"lbl-c",children:"Finding matching products..."}),5==K&&(0,r.jsx)("span",{className:"lbl-c",children:"This may take a few seconds..."}),6==K&&(0,r.jsx)("span",{className:"lbl-c",children:"This panel will auto close on favoriting \u2705"}),(0,r.jsx)("div",{className:"loading-bar animatec",children:(0,r.jsx)("span",{className:"lb"})})]}),b&&(0,r.jsx)(w,{})]})]})}},5670:(e,t,s)=>{s.d(t,{Ak:()=>a});let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",s=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&s[e]];return t}}}]);
//# sourceMappingURL=608.e328668a.chunk.js.map