"use strict";(self.webpackChunkssr_client=self.webpackChunkssr_client||[]).push([[613],{6613:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c});var r=o(9643),s=o(7214),l=o.n(s),i=o(4110),n=o(6507);const c=e=>{let{url:t}=e;const[o,s]=(0,r.useState)(""),[c,a]=(0,r.useState)(0),[d,u]=(0,r.useState)(0),p=(0,r.createRef)(),h=new AbortController;return(0,n.jsxs)("div",{className:"main",children:[(0,n.jsxs)("div",{class:"container",children:[(0,n.jsx)("h1",{children:"Add Product"}),(0,n.jsx)("input",{id:"pTitle",type:"text",placeholder:"Title"}),(0,n.jsx)("input",{id:"pHighlights",type:"text",placeholder:"Highlights (e.g. type: kidswear, age: 9-10)"}),(0,n.jsx)("textarea",{id:"pDesc",placeholder:"Description"}),(0,n.jsx)("input",{id:"pPrice",type:"number",placeholder:"Price"}),(0,n.jsxs)("select",{id:"pEligibleFor",children:[(0,n.jsx)("option",{disabled:!0,selected:!0,children:"Eligible for"}),(0,n.jsx)("option",{children:"Online Purchase"}),(0,n.jsx)("option",{children:"Online Enquiry"}),(0,n.jsx)("option",{children:"Online Booking"})]}),(0,n.jsxs)("select",{id:"pCategory",children:[(0,n.jsx)("option",{selected:!0,children:"Default"}),(0,n.jsx)("option",{children:"Season's Special"}),(0,n.jsx)("option",{children:"New Arrival"})]}),(0,n.jsx)("input",{type:"file",ref:p,style:{width:"92%"}}),(0,n.jsx)("div",{className:"footer-buttons",children:(0,n.jsx)("button",{style:{background:"linear-gradient(180deg, #595959, #000000)"},type:"button",onClick:async()=>{const e=p.current;if(!e||!e.files||0===e.files.length)return void alert("Please select a file to upload");const t=e.files[0];let o;try{o=await(async()=>{try{const e=await fetch("/auth");if(!e.ok){const t=await e.text();throw new Error("Request failed with status ".concat(e.status,": ").concat(t))}const t=await e.json(),{signature:o,expire:r,token:s,publicKey:l}=t;return{signature:o,expire:r,token:s,publicKey:l}}catch(e){throw console.error("Authentication error:",e),new Error("Authentication request failed")}})()}catch(c){return void console.error("Failed to authenticate for upload:",c)}const{signature:r,expire:s,token:l,publicKey:n}=o;try{const e=await(0,i.Se)({expire:s,token:l,signature:r,publicKey:n,file:t,fileName:t.name,onProgress:e=>{a(e.loaded/e.total*100)},abortSignal:h.signal});u(e.url),console.log("Upload response:",e)}catch(d){d instanceof i.eb?console.error("Upload aborted:",d.reason):d instanceof i.cR?console.error("Invalid request:",d.message):d instanceof i.rK?console.error("Network error:",d.message):d instanceof i.Dx?console.error("Server error:",d.message):console.error("Upload error:",d)}},children:"Upload file"})}),(0,n.jsx)("br",{}),"Upload progress: ",(0,n.jsx)("progress",{value:c,max:100})]}),(0,n.jsxs)("div",{class:"footer-buttons",children:[(0,n.jsxs)("button",{onClick:()=>{(()=>{const e=document.querySelector("#pTitle").value,t=document.querySelector("#pHighlights").value,o=document.querySelector("#pDesc").value,r=document.querySelector("#pPrice").value,s=document.querySelector("#pEligibleFor").options[document.querySelector("#pEligibleFor").selectedIndex].value,i=document.querySelector("#pCategory").options[document.querySelector("#pCategory").selectedIndex].value,n=d,c=JSON.parse(window.sessionStorage.getItem("user-profile")).storeId;console.log("--title--",e),console.log("--highlights--",t),console.log("--description--",o),console.log("--price--",r),console.log("--eligibleFor--",s),console.log("--primaryCat--",i),console.log("--thumbnailUrl--",n),l().post("/createProduct",{title:e,highlights:t,description:o,price:r,eligibleFor:s,primaryCat:i,thumbnailUrl:n,storeId:c}).then((e=>{console.log("--Create Product Response--",e),setTimeout((()=>{window.location.reload()}),500)}))})()},children:[(0,n.jsx)("span",{children:"Save & Add"}),(0,n.jsx)("i",{class:"fas fa-plus"})]}),(0,n.jsxs)("button",{children:[(0,n.jsx)("span",{children:"Finish"}),(0,n.jsx)("i",{class:"fas fa-arrow-right"})]})]})]})}}}]);
//# sourceMappingURL=613.d66a15a9.chunk.js.map